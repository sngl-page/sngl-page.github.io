{"version":3,"file":"assets/main.16e8d55049dafd31c705.js","mappings":"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","sources":["webpack://pen-click-dose-calculator/./src/lib/clickPlanner.ts","webpack://pen-click-dose-calculator/./src/i18n/index.ts","webpack://pen-click-dose-calculator/./src/index.ts"],"sourcesContent":["// --- i18n primitives ---------------------------------------------------------\nconst defaultMessages = {\n    \"err.mgPerDose\": \"mgPerDose must be > 0\",\n    \"err.clicksPerDose\": \"clicksPerDose must be > 0\",\n    \"err.volumePerDose\": \"volumePerDoseMl must be > 0\",\n    \"err.desiredMg\": \"desiredMg must be >= 0\",\n    \"err.minMax\": \"Invalid min/max clicks per set\",\n    \"warn.roundedToZero\": \"Rounded to 0 clicks.\",\n    \"warn.deltaMg\": \"Delivered dose ({delivered}) differs from requested ({requested}) by {delta}. Consider adjusting the rounding mode.\",\n    \"warn.totalBelowMin\": \"Total clicks ({total}) is below the recommended minimum of {min}. Very small sets can be unreliable.\",\n    \"warn.smallSet\": \"One or more sets are below {min} clicks; consider a different rounding mode or target.\",\n    \"warn.largeSet\": \"One or more sets exceed {max} clicks; this should not occur with the constraints.\",\n    \"warn.partitionFail\": \"Could not find a partition meeting constraints; returning a single set.\",\n};\nfunction interpolate(template, params) {\n    if (!params)\n        return template;\n    return template.replace(/\\{(\\w+)\\}/g, (_, k) => params[k] === undefined || params[k] === null ? \"\" : String(params[k]));\n}\n/**\n * Factory for a simple i18n instance.\n * - locale: Intl locale, e.g. \"en-GB\", \"es-ES\"\n * - overrides: provide your own messages for any keys you want to translate\n * - units: override unit labels if needed (\"mg\", \"ml\")\n * - numberFormat: tweak digits/formatting\n */\nexport function makeI18n(locale = \"en-GB\", overrides, units, numberFormat) {\n    const msgs = { ...defaultMessages, ...overrides };\n    const u = { mg: \"mg\", ml: \"ml\", ...units };\n    const nfMg = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 3,\n        ...(numberFormat?.mg ?? {}),\n    });\n    const nfMl = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 3,\n        ...(numberFormat?.ml ?? {}),\n    });\n    const nfInt = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 0,\n        ...(numberFormat?.integer ?? {}),\n    });\n    const NBSP = \"\\u00A0\"; // non-breaking space\n    return {\n        locale,\n        t: (key, params) => interpolate(msgs[key] ?? key, params),\n        format: {\n            mg: (n) => `${nfMg.format(n)}${NBSP}${u.mg}`,\n            ml: (n) => `${nfMl.format(n)}${NBSP}${u.ml}`,\n            integer: (n) => nfInt.format(n),\n        },\n    };\n}\n// --- public API --------------------------------------------------------------\nexport function planClicks(input) {\n    const { mgPerDose, desiredMg, clicksPerDose = 60, volumePerDoseMl = 0.6, maxClicksPerSet = 60, minClicksPerSet = 10, roundingMode = \"nearest\", i18n = makeI18n(), // default English\n     } = input;\n    const warnings = [];\n    // Validation (localized)\n    if (mgPerDose <= 0)\n        throw new Error(i18n.t(\"err.mgPerDose\"));\n    if (clicksPerDose <= 0)\n        throw new Error(i18n.t(\"err.clicksPerDose\"));\n    if (volumePerDoseMl <= 0)\n        throw new Error(i18n.t(\"err.volumePerDose\"));\n    if (desiredMg < 0)\n        throw new Error(i18n.t(\"err.desiredMg\"));\n    if (minClicksPerSet <= 0 || maxClicksPerSet < minClicksPerSet) {\n        throw new Error(i18n.t(\"err.minMax\"));\n    }\n    const mgPerClick = mgPerDose / clicksPerDose;\n    const mlPerClick = volumePerDoseMl / clicksPerDose;\n    const exactClicks = desiredMg / mgPerClick;\n    function roundByMode(x, mode) {\n        switch (mode) {\n            case \"down\":\n                return Math.floor(x);\n            case \"up\":\n                return Math.ceil(x);\n            case \"nearest\":\n            default:\n                return Math.round(x);\n        }\n    }\n    let totalClicks = roundByMode(exactClicks, roundingMode);\n    if (desiredMg === 0 || totalClicks === 0) {\n        return {\n            totalClicks: 0,\n            clickSets: [],\n            totalVolumeMl: 0,\n            requestedMg: desiredMg,\n            deliveredMg: 0,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings: desiredMg === 0\n                ? warnings\n                : [...warnings, i18n.t(\"warn.roundedToZero\")],\n        };\n    }\n    const deliveredMg = totalClicks * mgPerClick;\n    const deltaMg = deliveredMg - desiredMg;\n    // If the difference is more than half a click’s mg, let user know.\n    if (Math.abs(deltaMg) > mgPerClick / 2) {\n        warnings.push(i18n.t(\"warn.deltaMg\", {\n            delivered: i18n.format.mg(deliveredMg),\n            requested: i18n.format.mg(desiredMg),\n            delta: i18n.format.mg(Math.abs(deltaMg)),\n        }));\n    }\n    if (totalClicks < minClicksPerSet) {\n        warnings.push(i18n.t(\"warn.totalBelowMin\", {\n            total: i18n.format.integer(totalClicks),\n            min: i18n.format.integer(minClicksPerSet),\n        }));\n        return {\n            totalClicks,\n            clickSets: [totalClicks],\n            totalVolumeMl: totalClicks * mlPerClick,\n            requestedMg: desiredMg,\n            deliveredMg,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings,\n        };\n    }\n    const clickSets = partitionClicksNicely(totalClicks, {\n        min: minClicksPerSet,\n        max: maxClicksPerSet,\n    });\n    if (!clickSets || clickSets.length === 0) {\n        warnings.push(i18n.t(\"warn.partitionFail\"));\n        return {\n            totalClicks,\n            clickSets: [totalClicks],\n            totalVolumeMl: totalClicks * mlPerClick,\n            requestedMg: desiredMg,\n            deliveredMg,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings,\n        };\n    }\n    if (clickSets.some((c) => c < minClicksPerSet)) {\n        warnings.push(i18n.t(\"warn.smallSet\", { min: i18n.format.integer(minClicksPerSet) }));\n    }\n    if (clickSets.some((c) => c > maxClicksPerSet)) {\n        warnings.push(i18n.t(\"warn.largeSet\", { max: i18n.format.integer(maxClicksPerSet) }));\n    }\n    return {\n        totalClicks,\n        clickSets,\n        totalVolumeMl: totalClicks * mlPerClick,\n        requestedMg: desiredMg,\n        deliveredMg,\n        perClick: { mg: mgPerClick, ml: mlPerClick },\n        warnings,\n    };\n}\n// --- partitioning internals (unchanged logic) --------------------------------\nfunction partitionClicksNicely(total, opts) {\n    const { min, max } = opts;\n    const K = Math.ceil(total / max);\n    if (K <= 0)\n        return [];\n    if (K === 1 && total >= min && total <= max)\n        return [total];\n    if (total < K * min) {\n        const altK = Math.max(1, Math.floor(total / min));\n        if (altK >= 1 && total <= altK * max && total >= altK * min) {\n            return partitionWithK(total, altK, min, max);\n        }\n    }\n    return partitionWithK(total, K, min, max);\n}\nfunction partitionWithK(total, K, min, max) {\n    const balanceWeight = 0.05;\n    const tensBonus = 2.0;\n    const fivePenalty = 1.0;\n    const nonFivePenalty = 3.0;\n    const atMinPenalty = 4.0;\n    const target = total / K;\n    function scoreValue(v) {\n        let score = balanceWeight * Math.pow(v - target, 2);\n        if (v % 10 === 0)\n            score -= tensBonus;\n        else if (v % 5 === 0)\n            score += fivePenalty;\n        else\n            score += nonFivePenalty;\n        if (v === min)\n            score += atMinPenalty;\n        return score;\n    }\n    const dp = Array.from({ length: K + 1 }, () => Array(total + 1).fill(Number.POSITIVE_INFINITY));\n    const back = Array.from({ length: K + 1 }, () => Array(total + 1).fill(-1));\n    dp[0][0] = 0;\n    for (let i = 1; i <= K; i++) {\n        const minSum = i * min;\n        const maxSum = Math.min(total, i * max);\n        for (let s = minSum; s <= maxSum; s++) {\n            const sPrevMin = (i - 1) * min;\n            const sPrevMax = Math.min(total, (i - 1) * max);\n            const vMin = Math.max(min, s - sPrevMax);\n            const vMax = Math.min(max, s - sPrevMin);\n            for (let v = vMin; v <= vMax; v++) {\n                const prevScore = dp[i - 1][s - v];\n                if (prevScore === Number.POSITIVE_INFINITY)\n                    continue;\n                const cand = prevScore + scoreValue(v);\n                if (cand < dp[i][s]) {\n                    dp[i][s] = cand;\n                    back[i][s] = v;\n                }\n            }\n        }\n    }\n    if (dp[K][total] === Number.POSITIVE_INFINITY)\n        return [];\n    const sets = new Array(K);\n    let s = total;\n    for (let i = K; i >= 1; i--) {\n        const v = back[i][s];\n        if (v < 0)\n            return [];\n        sets[i - 1] = v;\n        s -= v;\n    }\n    return sets;\n}\n","/* Locale list and types */\nexport const LOCALES = [\n    \"en-GB\",\n    \"fr-FR\",\n    \"de-DE\",\n    \"pl-PL\",\n    \"ro-RO\",\n    \"es-ES\",\n    \"pt-PT\",\n    \"it-IT\",\n    \"cy\",\n    \"bn-BD\",\n    \"tr-TR\",\n    \"zh-Hans\",\n    \"uk-UA\",\n    \"ar\",\n];\nexport const DEFAULT_LOCALE = \"en-GB\";\n/* Self-names for the picker */\nexport const LOCALE_LABELS = {\n    \"en-GB\": \"English (UK)\",\n    \"fr-FR\": \"Français\",\n    \"de-DE\": \"Deutsch\",\n    \"pl-PL\": \"Polski\",\n    \"ro-RO\": \"Română\",\n    \"es-ES\": \"Español\",\n    \"pt-PT\": \"Português (PT)\",\n    \"it-IT\": \"Italiano\",\n    cy: \"Cymraeg\",\n    \"bn-BD\": \"বাংলা (বাংলাদেশ)\",\n    \"tr-TR\": \"Türkçe\",\n    \"zh-Hans\": \"简体中文\",\n    \"uk-UA\": \"Українська\",\n    ar: \"العربية\",\n};\n/* html lang attribute values */\nexport const HTML_LANG = {\n    \"en-GB\": \"en\",\n    \"fr-FR\": \"fr\",\n    \"de-DE\": \"de\",\n    \"pl-PL\": \"pl\",\n    \"ro-RO\": \"ro\",\n    \"es-ES\": \"es\",\n    \"pt-PT\": \"pt\",\n    \"it-IT\": \"it\",\n    cy: \"cy\",\n    \"bn-BD\": \"bn\",\n    \"tr-TR\": \"tr\",\n    \"zh-Hans\": \"zh-Hans\",\n    \"uk-UA\": \"uk\",\n    ar: \"ar\",\n};\n/* Optional helper: best-effort navigator match */\nexport function matchNavigatorLocale() {\n    if (typeof navigator === \"undefined\")\n        return null;\n    const cand = [...(navigator.languages || []), navigator.language].filter(Boolean);\n    for (const code of cand) {\n        const lc = code.toLowerCase();\n        if (lc.startsWith(\"en\"))\n            return \"en-GB\";\n        if (lc.startsWith(\"fr\"))\n            return \"fr-FR\";\n        if (lc.startsWith(\"de\"))\n            return \"de-DE\";\n        if (lc.startsWith(\"pl\"))\n            return \"pl-PL\";\n        if (lc.startsWith(\"ro\"))\n            return \"ro-RO\";\n        if (lc.startsWith(\"es\"))\n            return \"es-ES\";\n        if (lc.startsWith(\"pt\"))\n            return \"pt-PT\";\n        if (lc.startsWith(\"it\"))\n            return \"it-IT\";\n        if (lc.startsWith(\"cy\"))\n            return \"cy\";\n        if (lc.startsWith(\"bn\"))\n            return \"bn-BD\";\n        if (lc.startsWith(\"tr\"))\n            return \"tr-TR\";\n        if (lc.startsWith(\"uk\"))\n            return \"uk-UA\";\n        if (lc.startsWith(\"zh\"))\n            return \"zh-Hans\"; // map any Chinese to Simplified for now\n        if (lc.startsWith(\"ar\"))\n            return \"ar\";\n    }\n    return null;\n}\n/* UI strings per locale */\nexport const UI_STRINGS = {\n    \"en-GB\": {\n        title: \"Pen Click Dose Calculator\",\n        haveLabel: \"I have a\",\n        wantLabel: \"I want a dose of\",\n        resultHeading: \"Result\",\n        clickSets: \"Click sets\",\n        totalVolume: \"Total volume\",\n        deliveredDose: \"Delivered dose\",\n        requested: \"requested\",\n        disclaimer: \"This tool performs arithmetic planning only. Always follow your device’s instructions and consult a clinician or pharmacist for dosing decisions.\",\n        penWord: \"pen\",\n        ariaPen: \"Pen strength (mg per full dose)\",\n        ariaDesired: \"Desired dose (mg)\",\n        penHint: (n) => `This is the labelled dose per full dial (e.g. ${n} clicks).`,\n        summary: (p, t) => `(Pen: ${p}; Target: ${t})`,\n        perClickAndDose: (ml, mg) => `Per click: ${ml}; Per click dose: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clicks`,\n        stepHint: (s) => `Step: ${s} per click`,\n        enterDosePrompt: \"Enter a dose to see the plan.\",\n        quickPicksAria: \"Quick picks\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `e.g. ${ex}`,\n    },\n    \"fr-FR\": {\n        title: \"Calculateur de dose par clic\",\n        haveLabel: \"J’ai un\",\n        wantLabel: \"Je veux une dose de\",\n        resultHeading: \"Résultat\",\n        clickSets: \"Ensembles de clics\",\n        totalVolume: \"Volume total\",\n        deliveredDose: \"Dose délivrée\",\n        requested: \"demandée\",\n        disclaimer: \"Cet outil ne fournit qu’une aide de calcul. Suivez toujours les instructions de votre appareil et demandez conseil à un professionnel de santé.\",\n        penWord: \"stylo\",\n        ariaPen: \"Force du stylo (mg par dose complète)\",\n        ariaDesired: \"Dose souhaitée (mg)\",\n        penHint: (n) => `Ceci est la dose indiquée pour un tour complet (p. ex. ${n}\\u202fclics).`,\n        summary: (p, t) => `(Stylo\\u202f: ${p}\\u202f; Objectif\\u202f: ${t})`,\n        perClickAndDose: (ml, mg) => `Par clic\\u202f: ${ml}\\u202f; Dose par clic\\u202f: ${mg}`,\n        totalClicksLine: (n) => `Total\\u202f: ${n} clics`,\n        stepHint: (s) => `Pas\\u202f: ${s} par clic`,\n        enterDosePrompt: \"Saisissez une dose pour afficher le plan.\",\n        quickPicksAria: \"Raccourcis\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `p. ex. ${ex}`,\n    },\n    \"de-DE\": {\n        title: \"Klick‑Dosis‑Rechner\",\n        haveLabel: \"Ich habe einen\",\n        wantLabel: \"Ich möchte eine Dosis von\",\n        resultHeading: \"Ergebnis\",\n        clickSets: \"Klick‑Sets\",\n        totalVolume: \"Gesamtvolumen\",\n        deliveredDose: \"Abgegebene Dosis\",\n        requested: \"gewünscht\",\n        disclaimer: \"Dieses Werkzeug liefert nur eine rechnerische Planung. Befolgen Sie stets die Anweisungen Ihres Geräts und lassen Sie sich medizinisch beraten.\",\n        penWord: \"Pen\",\n        ariaPen: \"Pen‑Stärke (mg pro Volldosis)\",\n        ariaDesired: \"Gewünschte Dosis (mg)\",\n        penHint: (n) => `Dies ist die angegebene Dosis pro voller Drehung (z. B. ${n} Klicks).`,\n        summary: (p, t) => `(Pen: ${p}; Ziel: ${t})`,\n        perClickAndDose: (ml, mg) => `Pro Klick: ${ml}; Dosis pro Klick: ${mg}`,\n        totalClicksLine: (n) => `Summe: ${n} Klicks`,\n        stepHint: (s) => `Schrittweite: ${s} pro Klick`,\n        enterDosePrompt: \"Geben Sie eine Dosis ein, um den Plan zu sehen.\",\n        quickPicksAria: \"Schnellauswahl\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `z. B. ${ex}`,\n    },\n    \"pl-PL\": {\n        title: \"Kalkulator dawki na klik\",\n        haveLabel: \"Mam\",\n        wantLabel: \"Chcę dawkę\",\n        resultHeading: \"Wynik\",\n        clickSets: \"Zestawy kliknięć\",\n        totalVolume: \"Całkowita objętość\",\n        deliveredDose: \"Podana dawka\",\n        requested: \"docelowa\",\n        disclaimer: \"To narzędzie służy wyłącznie do obliczeń. Zawsze postępuj zgodnie z instrukcjami urządzenia i skonsultuj dawkę z pracownikiem ochrony zdrowia.\",\n        penWord: \"pen\",\n        ariaPen: \"Moc pena (mg na pełną dawkę)\",\n        ariaDesired: \"Docelowa dawka (mg)\",\n        penHint: (n) => `To jest dawka oznaczona dla pełnego obrotu (np. ${n} kliknięć).`,\n        summary: (p, t) => `(Pen: ${p}; Cel: ${t})`,\n        perClickAndDose: (ml, mg) => `Na klik: ${ml}; Dawka na klik: ${mg}`,\n        totalClicksLine: (n) => `Razem: ${n} kliknięć`,\n        stepHint: (s) => `Krok: ${s} na klik`,\n        enterDosePrompt: \"Wpisz dawkę, aby zobaczyć plan.\",\n        quickPicksAria: \"Szybki wybór\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `np. ${ex}`,\n    },\n    \"ro-RO\": {\n        title: \"Calculator doză pe clic\",\n        haveLabel: \"Am un\",\n        wantLabel: \"Vreau o doză de\",\n        resultHeading: \"Rezultat\",\n        clickSets: \"Seturi de clicuri\",\n        totalVolume: \"Volum total\",\n        deliveredDose: \"Doză administrată\",\n        requested: \"dorită\",\n        disclaimer: \"Acest instrument oferă doar calcule. Respectați instrucțiunile dispozitivului și consultați un specialist.\",\n        penWord: \"pen\",\n        ariaPen: \"Concentrația penului (mg per doză completă)\",\n        ariaDesired: \"Doza dorită (mg)\",\n        penHint: (n) => `Aceasta este doza indicată pentru o rotație completă (ex. ${n} clicuri).`,\n        summary: (p, t) => `(Pen: ${p}; Țintă: ${t})`,\n        perClickAndDose: (ml, mg) => `Per clic: ${ml}; Doză per clic: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clicuri`,\n        stepHint: (s) => `Pas: ${s} per clic`,\n        enterDosePrompt: \"Introduceți o doză pentru a vedea planul.\",\n        quickPicksAria: \"Selecții rapide\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `ex. ${ex}`,\n    },\n    \"es-ES\": {\n        title: \"Calculadora de dosis por clic\",\n        haveLabel: \"Tengo un\",\n        wantLabel: \"Quiero una dosis de\",\n        resultHeading: \"Resultado\",\n        clickSets: \"Conjuntos de clics\",\n        totalVolume: \"Volumen total\",\n        deliveredDose: \"Dosis administrada\",\n        requested: \"objetivo\",\n        disclaimer: \"Esta herramienta ofrece solo un cálculo orientativo. Siga las instrucciones del dispositivo y consulte a un profesional sanitario.\",\n        penWord: \"pluma\",\n        ariaPen: \"Fuerza de la pluma (mg por dosis completa)\",\n        ariaDesired: \"Dosis deseada (mg)\",\n        penHint: (n) => `Esta es la dosis indicada para una vuelta completa (p. ej., ${n} clics).`,\n        summary: (p, t) => `(Pluma: ${p}; Objetivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Por clic: ${ml}; Dosis por clic: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clics`,\n        stepHint: (s) => `Paso: ${s} por clic`,\n        enterDosePrompt: \"Introduce una dosis para ver el plan.\",\n        quickPicksAria: \"Accesos rápidos\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `p. ej., ${ex}`,\n    },\n    \"pt-PT\": {\n        title: \"Calculadora de dose por clique\",\n        haveLabel: \"Tenho uma\",\n        wantLabel: \"Quero uma dose de\",\n        resultHeading: \"Resultado\",\n        clickSets: \"Conjuntos de cliques\",\n        totalVolume: \"Volume total\",\n        deliveredDose: \"Dose administrada\",\n        requested: \"pretendida\",\n        disclaimer: \"Esta ferramenta serve apenas para cálculo. Siga as instruções do dispositivo e consulte um profissional de saúde.\",\n        penWord: \"caneta\",\n        ariaPen: \"Força da caneta (mg por dose completa)\",\n        ariaDesired: \"Dose pretendida (mg)\",\n        penHint: (n) => `Esta é a dose indicada para uma volta completa (ex.: ${n} cliques).`,\n        summary: (p, t) => `(Caneta: ${p}; Objetivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Por clique: ${ml}; Dose por clique: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} cliques`,\n        stepHint: (s) => `Passo: ${s} por clique`,\n        enterDosePrompt: \"Introduza uma dose para ver o plano.\",\n        quickPicksAria: \"Atalhos\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `ex.: ${ex}`,\n    },\n    \"it-IT\": {\n        title: \"Calcolatore dose a clic\",\n        haveLabel: \"Ho una\",\n        wantLabel: \"Voglio una dose di\",\n        resultHeading: \"Risultato\",\n        clickSets: \"Set di clic\",\n        totalVolume: \"Volume totale\",\n        deliveredDose: \"Dose erogata\",\n        requested: \"richiesta\",\n        disclaimer: \"Questo strumento fornisce solo un calcolo orientativo. Segui le istruzioni del dispositivo e consulta un professionista sanitario.\",\n        penWord: \"penna\",\n        ariaPen: \"Forza della penna (mg per dose completa)\",\n        ariaDesired: \"Dose desiderata (mg)\",\n        penHint: (n) => `Questa è la dose indicata per un giro completo (es. ${n} clic).`,\n        summary: (p, t) => `(Penna: ${p}; Obiettivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Per clic: ${ml}; Dose per clic: ${mg}`,\n        totalClicksLine: (n) => `Totale: ${n} clic`,\n        stepHint: (s) => `Passo: ${s} per clic`,\n        enterDosePrompt: \"Inserisci una dose per vedere il piano.\",\n        quickPicksAria: \"Scelte rapide\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `es. ${ex}`,\n    },\n    cy: {\n        title: \"Cyfrifiannell dos fesul clic\",\n        haveLabel: \"Mae gen i\",\n        wantLabel: \"Rwyf eisiau dos o\",\n        resultHeading: \"Canlyniad\",\n        clickSets: \"Setiau clic\",\n        totalVolume: \"Cyfaint cyfan\",\n        deliveredDose: \"Dos a roddwyd\",\n        requested: \"a ddymunir\",\n        disclaimer: \"Mae’r teclyn hwn ar gyfer cyfrifiadau yn unig. Dylech ddilyn cyfarwyddiadau eich dyfais a cheisio cyngor gan glinigydd neu fferyllydd.\",\n        penWord: \"pen\",\n        ariaPen: \"Cryfer pen (mg fesul dos llawn)\",\n        ariaDesired: \"Dos a ddymunir (mg)\",\n        penHint: (n) => `Dyma’r dos wedi’i labelu ar gyfer tro llawn (e.e. ${n} clic).`,\n        summary: (p, t) => `(Pen: ${p}; Targed: ${t})`,\n        perClickAndDose: (ml, mg) => `Fesul clic: ${ml}; Dos fesul clic: ${mg}`,\n        totalClicksLine: (n) => `Cyfanswm: ${n} clic`,\n        stepHint: (s) => `Cam: ${s} fesul clic`,\n        enterDosePrompt: \"Rhowch ddos i weld y cynllun.\",\n        quickPicksAria: \"Dewisiadau cyflym\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `e.e. ${ex}`,\n    },\n    \"bn-BD\": {\n        title: \"ক্লিকভিত্তিক ডোজ ক্যালকুলেটর\",\n        haveLabel: \"আমার আছে\",\n        wantLabel: \"আমি একটি ডোজ চাই\",\n        resultHeading: \"ফলাফল\",\n        clickSets: \"ক্লিক সেট\",\n        totalVolume: \"মোট ভলিউম\",\n        deliveredDose: \"প্রয়োগিত ডোজ\",\n        requested: \"লক্ষ্য\",\n        disclaimer: \"এই টুলটি শুধুমাত্র গণনার সহায়তা। আপনার ডিভাইসের নির্দেশনা অনুসরণ করুন এবং প্রয়োজনে স্বাস্থ্য‑পেশাদারের সাথে পরামর্শ করুন।\",\n        penWord: \"পেন\",\n        ariaPen: \"পেনের ক্ষমতা (পূর্ণ ডোজে mg)\",\n        ariaDesired: \"প্রয়োজনীয় ডোজ (mg)\",\n        penHint: (n) => `এটি সম্পূর্ণ এক টার্নের লেবেলকৃত ডোজ (যেমন, ${n} ক্লিক)।`,\n        summary: (p, t) => `(পেন: ${p}; লক্ষ্য: ${t})`,\n        perClickAndDose: (ml, mg) => `প্রতি ক্লিক: ${ml}; প্রতি ক্লিকে ডোজ: ${mg}`,\n        totalClicksLine: (n) => `মোট: ${n} ক্লিক`,\n        stepHint: (s) => `ধাপ: প্রতি ক্লিকে ${s}`,\n        enterDosePrompt: \"পরিকল্পনা দেখতে ডোজ লিখুন।\",\n        quickPicksAria: \"দ্রুত পছন্দ\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `যেমন ${ex}`,\n    },\n    \"tr-TR\": {\n        title: \"Tıklama doz hesaplayıcı\",\n        haveLabel: \"Bende\",\n        wantLabel: \"Şu dozu istiyorum\",\n        resultHeading: \"Sonuç\",\n        clickSets: \"Tıklama setleri\",\n        totalVolume: \"Toplam hacim\",\n        deliveredDose: \"Uygulanan doz\",\n        requested: \"hedef\",\n        disclaimer: \"Bu araç yalnızca hesaplama yardımı sağlar. Lütfen cihazınızın talimatlarına uyun ve bir sağlık profesyoneline danışın.\",\n        penWord: \"kalem\",\n        ariaPen: \"Kalem gücü (tam doz başına mg)\",\n        ariaDesired: \"İstenen doz (mg)\",\n        penHint: (n) => `Bu, tam tur için etiketli dozdur (örn. ${n} tıklama).`,\n        summary: (p, t) => `(Kalem: ${p}; Hedef: ${t})`,\n        perClickAndDose: (ml, mg) => `Tıklama başına: ${ml}; Tıklama başına doz: ${mg}`,\n        totalClicksLine: (n) => `Toplam: ${n} tıklama`,\n        stepHint: (s) => `Adım: tıklama başına ${s}`,\n        enterDosePrompt: \"Planı görmek için bir doz girin.\",\n        quickPicksAria: \"Hızlı seçimler\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `örn. ${ex}`,\n    },\n    \"zh-Hans\": {\n        title: \"点击剂量计算器\",\n        haveLabel: \"我有一支\",\n        wantLabel: \"我想要的剂量\",\n        resultHeading: \"结果\",\n        clickSets: \"点击组\",\n        totalVolume: \"总量\",\n        deliveredDose: \"实际剂量\",\n        requested: \"目标\",\n        disclaimer: \"本工具仅用于计算规划。请遵循设备说明，并咨询医疗专业人士。\",\n        penWord: \"注射笔\",\n        ariaPen: \"注射笔规格（mg/整剂）\",\n        ariaDesired: \"期望剂量（mg）\",\n        penHint: (n) => `这是旋钮转一圈的标称剂量（例如：${n} 次点击）。`,\n        summary: (p, t) => `（${\"注射笔\"}：${p}； 目标：${t}）`,\n        perClickAndDose: (ml, mg) => `每次点击：${ml}； 每次点击剂量：${mg}`,\n        totalClicksLine: (n) => `合计：${n} 次点击`,\n        stepHint: (s) => `步长：每次点击 ${s}`,\n        enterDosePrompt: \"输入剂量以查看计划。\",\n        quickPicksAria: \"快速选择\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `例如 ${ex}`,\n    },\n    \"uk-UA\": {\n        title: \"Калькулятор дози за кліками\",\n        haveLabel: \"У мене є\",\n        wantLabel: \"Мені потрібна доза\",\n        resultHeading: \"Результат\",\n        clickSets: \"Набори кліків\",\n        totalVolume: \"Загальний об’єм\",\n        deliveredDose: \"Фактична доза\",\n        requested: \"цільова\",\n        disclaimer: \"Цей інструмент слугує лише для розрахунків. Дотримуйтесь інструкцій вашого пристрою та консультуйтесь з медичним фахівцем.\",\n        penWord: \"шприц‑ручка\",\n        ariaPen: \"Сила шприц‑ручки (мг на повну дозу)\",\n        ariaDesired: \"Бажана доза (мг)\",\n        penHint: (n) => `Це маркована доза за повний оберт (напр., ${n} кліків).`,\n        summary: (p, t) => `(Ручка: ${p}; Ціль: ${t})`,\n        perClickAndDose: (ml, mg) => `За клік: ${ml}; Доза за клік: ${mg}`,\n        totalClicksLine: (n) => `Разом: ${n} кліків`,\n        stepHint: (s) => `Крок: ${s} за клік`,\n        enterDosePrompt: \"Введіть дозу, щоб побачити план.\",\n        quickPicksAria: \"Швидкий вибір\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `напр. ${ex}`,\n    },\n    ar: {\n        title: \"حاسبة الجرعة بالنقر\",\n        haveLabel: \"لديّ\",\n        wantLabel: \"أريد جرعة مقدارها\",\n        resultHeading: \"النتيجة\",\n        clickSets: \"مجموعات النقرات\",\n        totalVolume: \"الحجم الكلّي\",\n        deliveredDose: \"الجرعة المعطاة\",\n        requested: \"المطلوبة\",\n        disclaimer: \"هذا الموقع للمساعدة الحسابية فقط. يُرجى اتّباع تعليمات جهازك واستشارة مختص صحي عند الحاجة.\",\n        penWord: \"قلم\",\n        ariaPen: \"قوّة القلم (ملغ لكل جرعة كاملة)\",\n        ariaDesired: \"الجرعة المطلوبة (ملغ)\",\n        penHint: (n) => `هذه هي الجرعة المُعلَّمة لدورة كاملة (مثال: ${n} نقرة).`,\n        summary: (p, t) => `(القلم: ${p}؛ الهدف: ${t})`,\n        perClickAndDose: (ml, mg) => `لكل نقرة: ${ml}؛ جرعة كل نقرة: ${mg}`,\n        totalClicksLine: (n) => `المجموع: ${n} نقرة`,\n        stepHint: (s) => `الخطوة: ${s} لكل نقرة`,\n        enterDosePrompt: \"أدخل جرعة لعرض الخطة.\",\n        quickPicksAria: \"اختيارات سريعة\",\n        mgSuffix: \"mg\", // أو \"ملغ\" إذا فضّلت التعريب الكامل للوحدات\n        desiredPlaceholder: (ex) => `مثلاً ${ex}`,\n    },\n};\nexport const LOCALE_DIR = {\n    \"en-GB\": \"ltr\",\n    \"fr-FR\": \"ltr\",\n    \"de-DE\": \"ltr\",\n    \"pl-PL\": \"ltr\",\n    \"ro-RO\": \"ltr\",\n    \"es-ES\": \"ltr\",\n    \"pt-PT\": \"ltr\",\n    \"it-IT\": \"ltr\",\n    cy: \"ltr\",\n    \"bn-BD\": \"ltr\",\n    \"tr-TR\": \"ltr\",\n    \"zh-Hans\": \"ltr\",\n    \"uk-UA\": \"ltr\",\n    ar: \"rtl\",\n};\n/* Planner error/warning translations */\nexport const MESSAGES = {\n    \"en-GB\": {},\n    \"fr-FR\": {\n        \"err.mgPerDose\": \"mgPerDose doit être > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose doit être > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl doit être > 0\",\n        \"err.desiredMg\": \"desiredMg doit être ≥ 0\",\n        \"err.minMax\": \"Plage min/max de clics invalide\",\n        \"warn.roundedToZero\": \"Arrondi à 0 clic.\",\n        \"warn.deltaMg\": \"La dose délivrée ({delivered}) diffère de la dose demandée ({requested}) de {delta}. Envisagez d'ajuster le mode d'arrondi.\",\n        \"warn.totalBelowMin\": \"Le total de clics ({total}) est inférieur au minimum recommandé de {min}. Les très petits ensembles peuvent être peu fiables.\",\n        \"warn.smallSet\": \"Un ou plusieurs ensembles sont inférieurs à {min} clics; envisagez un autre mode d'arrondi ou un autre objectif.\",\n        \"warn.largeSet\": \"Un ou plusieurs ensembles dépassent {max} clics; cela ne devrait pas se produire avec ces contraintes.\",\n        \"warn.partitionFail\": \"Impossible de trouver une partition respectant les contraintes; un seul ensemble sera utilisé.\",\n    },\n    \"de-DE\": {\n        \"err.mgPerDose\": \"mgPerDose muss > 0 sein\",\n        \"err.clicksPerDose\": \"clicksPerDose muss > 0 sein\",\n        \"err.volumePerDose\": \"volumePerDoseMl muss > 0 sein\",\n        \"err.desiredMg\": \"desiredMg muss ≥ 0 sein\",\n        \"err.minMax\": \"Ungültiger Minimal-/Maximalbereich für Klicks\",\n        \"warn.roundedToZero\": \"Auf 0 Klicks gerundet.\",\n        \"warn.deltaMg\": \"Abgegebene Dosis ({delivered}) weicht von der gewünschten ({requested}) um {delta} ab. Passen Sie ggf. den Rundungsmodus an.\",\n        \"warn.totalBelowMin\": \"Gesamtanzahl der Klicks ({total}) liegt unter dem empfohlenen Minimum von {min}. Sehr kleine Sätze können unzuverlässig sein.\",\n        \"warn.smallSet\": \"Ein oder mehrere Sätze liegen unter {min} Klicks; erwägen Sie einen anderen Rundungsmodus oder Zielwert.\",\n        \"warn.largeSet\": \"Ein oder mehrere Sätze überschreiten {max} Klicks; dies sollte mit den Vorgaben nicht vorkommen.\",\n        \"warn.partitionFail\": \"Es konnte keine gültige Aufteilung gefunden werden; es wird ein einzelner Satz verwendet.\",\n    },\n    \"pl-PL\": {\n        \"err.mgPerDose\": \"mgPerDose musi być > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose musi być > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl musi być > 0\",\n        \"err.desiredMg\": \"desiredMg musi być ≥ 0\",\n        \"err.minMax\": \"Nieprawidłowy zakres min/max kliknięć\",\n        \"warn.roundedToZero\": \"Zaokrąglono do 0 kliknięć.\",\n        \"warn.deltaMg\": \"Podana dawka ({delivered}) różni się od docelowej ({requested}) o {delta}. Rozważ zmianę trybu zaokrąglania.\",\n        \"warn.totalBelowMin\": \"Łączna liczba kliknięć ({total}) jest poniżej zalecanego minimum {min}. Bardzo małe zestawy mogą być nieprecyzyjne.\",\n        \"warn.smallSet\": \"Jeden lub więcej zestawów ma mniej niż {min} kliknięć; rozważ inny tryb zaokrąglania lub inną dawkę docelową.\",\n        \"warn.largeSet\": \"Jeden lub więcej zestawów przekracza {max} kliknięć; nie powinno się to zdarzyć przy tych ograniczeniach.\",\n        \"warn.partitionFail\": \"Nie udało się znaleźć podziału spełniającego ograniczenia; użyto jednego zestawu.\",\n    },\n    \"ro-RO\": {\n        \"err.mgPerDose\": \"mgPerDose trebuie să fie > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose trebuie să fie > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl trebuie să fie > 0\",\n        \"err.desiredMg\": \"desiredMg trebuie să fie ≥ 0\",\n        \"err.minMax\": \"Interval minim/maxim de clicuri invalid\",\n        \"warn.roundedToZero\": \"Rotunjit la 0 clicuri.\",\n        \"warn.deltaMg\": \"Doza administrată ({delivered}) diferă de cea dorită ({requested}) cu {delta}. Luați în considerare ajustarea modului de rotunjire.\",\n        \"warn.totalBelowMin\": \"Numărul total de clicuri ({total}) este sub minimul recomandat de {min}. Seturile foarte mici pot fi nesigure.\",\n        \"warn.smallSet\": \"Unul sau mai multe seturi sunt sub {min} clicuri; luați în considerare alt mod de rotunjire sau altă țintă.\",\n        \"warn.largeSet\": \"Unul sau mai multe seturi depășesc {max} clicuri; nu ar trebui să se întâmple cu aceste constrângeri.\",\n        \"warn.partitionFail\": \"Nu s-a putut găsi o împărțire validă; se utilizează un singur set.\",\n    },\n    \"es-ES\": {\n        \"err.mgPerDose\": \"mgPerDose debe ser > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose debe ser > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl debe ser > 0\",\n        \"err.desiredMg\": \"desiredMg debe ser ≥ 0\",\n        \"err.minMax\": \"Rango mínimo/máximo de clics no válido\",\n        \"warn.roundedToZero\": \"Redondeado a 0 clics.\",\n        \"warn.deltaMg\": \"La dosis administrada ({delivered}) difiere de la objetivo ({requested}) en {delta}. Considere ajustar el modo de redondeo.\",\n        \"warn.totalBelowMin\": \"El total de clics ({total}) está por debajo del mínimo recomendado de {min}. Los conjuntos muy pequeños pueden ser poco fiables.\",\n        \"warn.smallSet\": \"Uno o más conjuntos están por debajo de {min} clics; considere otro modo de redondeo u otro objetivo.\",\n        \"warn.largeSet\": \"Uno o más conjuntos superan {max} clics; no debería ocurrir con estas restricciones.\",\n        \"warn.partitionFail\": \"No se pudo encontrar una partición válida; se usará un único conjunto.\",\n    },\n    \"pt-PT\": {\n        \"err.mgPerDose\": \"mgPerDose tem de ser > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose tem de ser > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl tem de ser > 0\",\n        \"err.desiredMg\": \"desiredMg tem de ser ≥ 0\",\n        \"err.minMax\": \"Intervalo mínimo/máximo de cliques inválido\",\n        \"warn.roundedToZero\": \"Arredondado para 0 cliques.\",\n        \"warn.deltaMg\": \"A dose administrada ({delivered}) difere da pretendida ({requested}) em {delta}. Considere ajustar o modo de arredondamento.\",\n        \"warn.totalBelowMin\": \"O total de cliques ({total}) está abaixo do mínimo recomendado de {min}. Conjuntos muito pequenos podem ser pouco fiáveis.\",\n        \"warn.smallSet\": \"Um ou mais conjuntos estão abaixo de {min} cliques; considere outro modo de arredondamento ou um alvo diferente.\",\n        \"warn.largeSet\": \"Um ou mais conjuntos excedem {max} cliques; isto não deveria acontecer com estas restrições.\",\n        \"warn.partitionFail\": \"Não foi possível encontrar uma divisão válida; será usado um único conjunto.\",\n    },\n    \"it-IT\": {\n        \"err.mgPerDose\": \"mgPerDose deve essere > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose deve essere > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl deve essere > 0\",\n        \"err.desiredMg\": \"desiredMg deve essere ≥ 0\",\n        \"err.minMax\": \"Intervallo minimo/massimo di clic non valido\",\n        \"warn.roundedToZero\": \"Arrotondato a 0 clic.\",\n        \"warn.deltaMg\": \"La dose erogata ({delivered}) differisce da quella richiesta ({requested}) di {delta}. Valuta di modificare la modalità di arrotondamento.\",\n        \"warn.totalBelowMin\": \"Il totale dei clic ({total}) è inferiore al minimo consigliato di {min}. Set molto piccoli possono essere imprecisi.\",\n        \"warn.smallSet\": \"Uno o più set sono sotto {min} clic; valuta un arrotondamento diverso o un obiettivo diverso.\",\n        \"warn.largeSet\": \"Uno o più set superano {max} clic; non dovrebbe accadere con questi vincoli.\",\n        \"warn.partitionFail\": \"Impossibile trovare una suddivisione valida; verrà usato un singolo set.\",\n    },\n    cy: {\n        \"err.mgPerDose\": \"Rhaid i mgPerDose fod yn > 0\",\n        \"err.clicksPerDose\": \"Rhaid i clicksPerDose fod yn > 0\",\n        \"err.volumePerDose\": \"Rhaid i volumePerDoseMl fod yn > 0\",\n        \"err.desiredMg\": \"Rhaid i desiredMg fod yn ≥ 0\",\n        \"err.minMax\": \"Amrediad isaf/uchel cliciau annilys\",\n        \"warn.roundedToZero\": \"Wedi’i dalgrynnu i 0 clic.\",\n        \"warn.deltaMg\": \"Mae’r dos a roddwyd ({delivered}) yn wahanol i’r targed ({requested}) o {delta}. Ystyriwch newid y modd talgrynnu.\",\n        \"warn.totalBelowMin\": \"Mae cyfanswm y cliciau ({total}) yn is na’r lleiafswm a argymhellir o {min}. Gall setiau bach fod yn annibynadwy.\",\n        \"warn.smallSet\": \"Mae un neu fwy o setiau o dan {min} clic; ystyriwch fodd talgrynnu neu darged gwahanol.\",\n        \"warn.largeSet\": \"Mae un neu fwy o setiau’n fwy na {max} clic; ni ddylai hyn ddigwydd gyda’r cyfyngiadau hyn.\",\n        \"warn.partitionFail\": \"Methu dod o hyd i raniad sy’n bodloni’r amodau; yn defnyddio un set.\",\n    },\n    \"bn-BD\": {\n        \"err.mgPerDose\": \"mgPerDose অবশ্যই > 0 হতে হবে\",\n        \"err.clicksPerDose\": \"clicksPerDose অবশ্যই > 0 হতে হবে\",\n        \"err.volumePerDose\": \"volumePerDoseMl অবশ্যই > 0 হতে হবে\",\n        \"err.desiredMg\": \"desiredMg অবশ্যই ≥ 0 হতে হবে\",\n        \"err.minMax\": \"ক্লিকের ন্যূনতম/সর্বোচ্চ সীমা অকার্যকর\",\n        \"warn.roundedToZero\": \"০ ক্লিকে রাউন্ড করা হয়েছে।\",\n        \"warn.deltaMg\": \"প্রয়োগিত ডোজ ({delivered}) লক্ষ্য ডোজ ({requested}) থেকে {delta} ভিন্ন। রাউন্ডিং মোড পরিবর্তনের কথা ভাবুন।\",\n        \"warn.totalBelowMin\": \"মোট ক্লিক ({total}) প্রস্তাবিত ন্যূনতম {min}‑এর নিচে। খুব ছোট সেট অনির্ভরযোগ্য হতে পারে।\",\n        \"warn.smallSet\": \"এক বা একাধিক সেট {min} ক্লিকের কম; ভিন্ন রাউন্ডিং বা লক্ষ্য বিবেচনা করুন।\",\n        \"warn.largeSet\": \"এক বা একাধিক সেট {max} ক্লিক অতিক্রম করেছে; এই সীমাবদ্ধতায় এটি হওয়া উচিত নয়।\",\n        \"warn.partitionFail\": \"শর্ত পূরণ করে এমন ভাগ পাওয়া যায়নি; একক সেট ব্যবহার করা হবে।\",\n    },\n    \"tr-TR\": {\n        \"err.mgPerDose\": \"mgPerDose > 0 olmalıdır\",\n        \"err.clicksPerDose\": \"clicksPerDose > 0 olmalıdır\",\n        \"err.volumePerDose\": \"volumePerDoseMl > 0 olmalıdır\",\n        \"err.desiredMg\": \"desiredMg ≥ 0 olmalıdır\",\n        \"err.minMax\": \"Geçersiz min/maks tıklama aralığı\",\n        \"warn.roundedToZero\": \"0 tıklamaya yuvarlandı.\",\n        \"warn.deltaMg\": \"Uygulanan doz ({delivered}), hedef dozdan ({requested}) {delta} kadar farklı. Yuvarlama modunu değiştirmeyi düşünün.\",\n        \"warn.totalBelowMin\": \"Toplam tıklama ({total}), önerilen asgari {min} değerinin altında. Çok küçük setler güvenilir olmayabilir.\",\n        \"warn.smallSet\": \"Bir veya daha fazla set {min} tıklamanın altında; farklı yuvarlama modu veya hedef deneyin.\",\n        \"warn.largeSet\": \"Bir veya daha fazla set {max} tıklamayı aşıyor; bu kısıtlarla olmamalı.\",\n        \"warn.partitionFail\": \"Kısıtları sağlayan bir bölme bulunamadı; tek set kullanılacak.\",\n    },\n    \"zh-Hans\": {\n        \"err.mgPerDose\": \"mgPerDose 必须大于 0\",\n        \"err.clicksPerDose\": \"clicksPerDose 必须大于 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl 必须大于 0\",\n        \"err.desiredMg\": \"desiredMg 必须大于或等于 0\",\n        \"err.minMax\": \"点击次数最小/最大范围无效\",\n        \"warn.roundedToZero\": \"已四舍五入为 0 次点击。\",\n        \"warn.deltaMg\": \"实际剂量（{delivered}）与目标（{requested}）相差 {delta}。可考虑调整取整方式。\",\n        \"warn.totalBelowMin\": \"总点击次数（{total}）低于建议的最小值 {min}。过小的组合可能不可靠。\",\n        \"warn.smallSet\": \"一个或多个组少于 {min} 次点击；可考虑其他取整方式或目标。\",\n        \"warn.largeSet\": \"一个或多个组超过 {max} 次点击；按当前限制不应出现。\",\n        \"warn.partitionFail\": \"未能找到满足约束的分组；将使用单一组合。\",\n    },\n    \"uk-UA\": {\n        \"err.mgPerDose\": \"mgPerDose має бути > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose має бути > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl має бути > 0\",\n        \"err.desiredMg\": \"desiredMg має бути ≥ 0\",\n        \"err.minMax\": \"Некоректний мінімальний/максимальний діапазон кліків\",\n        \"warn.roundedToZero\": \"Округлено до 0 кліків.\",\n        \"warn.deltaMg\": \"Фактична доза ({delivered}) відрізняється від цільової ({requested}) на {delta}. Розгляньте зміну режиму округлення.\",\n        \"warn.totalBelowMin\": \"Загальна кількість кліків ({total}) нижча за рекомендований мінімум {min}. Дуже малі набори можуть бути ненадійними.\",\n        \"warn.smallSet\": \"Один або кілька наборів менше ніж {min} кліків; спробуйте інший режим округлення або іншу ціль.\",\n        \"warn.largeSet\": \"Один або кілька наборів перевищують {max} кліків; цього не має бути за цих обмежень.\",\n        \"warn.partitionFail\": \"Не вдалося знайти коректний поділ; буде використано один набір.\",\n    },\n    ar: {\n        \"err.mgPerDose\": \"يجب أن تكون mgPerDose > 0\",\n        \"err.clicksPerDose\": \"يجب أن تكون clicksPerDose > 0\",\n        \"err.volumePerDose\": \"يجب أن تكون volumePerDoseMl > 0\",\n        \"err.desiredMg\": \"يجب أن تكون desiredMg ≥ 0\",\n        \"err.minMax\": \"نطاق الحد الأدنى/الأقصى للنقرات غير صالح\",\n        \"warn.roundedToZero\": \"تم التقريب إلى 0 نقرة.\",\n        \"warn.deltaMg\": \"الجرعة المعطاة ({delivered}) تختلف عن المطلوبة ({requested}) بمقدار {delta}. فكّر في تغيير نمط التقريب.\",\n        \"warn.totalBelowMin\": \"إجمالي النقرات ({total}) أقل من الحد الأدنى الموصى به وهو {min}. المجموعات الصغيرة جداً قد تكون غير دقيقة.\",\n        \"warn.smallSet\": \"هناك مجموعة أو أكثر أقل من {min} نقرة؛ فكّر في نمط تقريب أو هدف مختلف.\",\n        \"warn.largeSet\": \"هناك مجموعة أو أكثر تتجاوز {max} نقرة؛ لا ينبغي أن يحدث هذا ضمن القيود الحالية.\",\n        \"warn.partitionFail\": \"تعذّر إيجاد تقسيم يستوفي القيود؛ سيتم استخدام مجموعة واحدة.\",\n    },\n};\n","import \"./styles.css\";\nimport { planClicks, makeI18n } from \"./lib/clickPlanner\";\nimport { LOCALES, DEFAULT_LOCALE, LOCALE_LABELS, HTML_LANG, UI_STRINGS, LOCALE_DIR, MESSAGES, matchNavigatorLocale, } from \"./i18n\";\n/* 1) Constants */\nconst CLICKS_PER_DOSE = 60;\nconst VOLUME_PER_DOSE_ML = 0.6;\nconst QUICK_MG = [2.5, 5, 7.5, 10, 12.5, 15];\nconst DEFAULT_DECIMALS = 6;\n/* 2) Small utilities */\nfunction requireEl(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`Required element #${id} not found`);\n    return el;\n}\nfunction roundTo(n, decimals = DEFAULT_DECIMALS) {\n    const p = Math.pow(10, decimals);\n    return Math.round(n * p) / p;\n}\nfunction toFixedTrim(n, decimals = DEFAULT_DECIMALS) {\n    return roundTo(n, decimals)\n        .toFixed(decimals)\n        .replace(/\\.?0+$/, \"\");\n}\nfunction mgPerClick(penMg) {\n    return penMg / CLICKS_PER_DOSE;\n}\n/* 3) DOM refs */\nconst formEl = requireEl(\"planner-form\");\nconst penSelect = requireEl(\"pen-mg\");\nconst desiredInput = requireEl(\"desired-mg-input\");\nconst quickPicksEl = requireEl(\"quick-picks\");\nconst stepHintEl = requireEl(\"step-hint\");\nconst resultEl = requireEl(\"result\");\nconst titleEl = requireEl(\"t-title\");\nconst haveLabelEl = requireEl(\"t-have\");\nconst wantLabelEl = requireEl(\"t-want\");\nconst disclaimerEl = requireEl(\"t-disclaimer\");\nconst penHintEl = requireEl(\"t-pen-hint\");\nconst localeSelect = requireEl(\"locale\");\nconst copyright = document.getElementById(\"copyright-year\") ?? null;\nfunction readUrlState() {\n    const qs = new URLSearchParams(location.search);\n    const loc = qs.get(\"lang\");\n    const pen = qs.get(\"pen\");\n    const dose = qs.get(\"dose\");\n    const penNum = pen != null ? Number(pen) : undefined;\n    const doseNum = dose != null ? Number(dose) : undefined;\n    return {\n        locale: loc && LOCALES.includes(loc)\n            ? loc\n            : undefined,\n        pen: penNum && Number.isFinite(penNum) ? penNum : undefined,\n        dose: doseNum && Number.isFinite(doseNum) ? doseNum : undefined,\n    };\n}\nfunction writeUrlState(state) {\n    const url = new URL(location.href);\n    url.searchParams.set(\"lang\", state.locale);\n    url.searchParams.set(\"pen\", toFixedTrim(state.pen, 3));\n    if (state.dose && state.dose > 0) {\n        url.searchParams.set(\"dose\", toFixedTrim(state.dose, DEFAULT_DECIMALS));\n    }\n    else {\n        url.searchParams.delete(\"dose\");\n    }\n    history.replaceState(null, \"\", url.toString());\n    localStorage.setItem(\"clickdose.locale\", state.locale);\n}\n/* 5) Locale picker builder */\nfunction buildLocaleOptions(current) {\n    // Suggested = English (UK) + navigator match (if different)\n    const suggested = new Map();\n    suggested.set(\"en-GB\", LOCALE_LABELS[\"en-GB\"]);\n    const nav = matchNavigatorLocale();\n    if (nav && nav !== \"en-GB\")\n        suggested.set(nav, LOCALE_LABELS[nav]);\n    // All locales sorted by self-name\n    const all = Object.keys(LOCALE_LABELS).sort((a, b) => LOCALE_LABELS[a].localeCompare(LOCALE_LABELS[b], undefined, {\n        sensitivity: \"base\",\n    }));\n    localeSelect.innerHTML = \"\";\n    if (suggested.size > 0) {\n        const og = document.createElement(\"optgroup\");\n        og.label = \"Suggested\";\n        suggested.forEach((label, loc) => og.append(new Option(label, loc, false, loc === current)));\n        localeSelect.append(og);\n    }\n    const ogAll = document.createElement(\"optgroup\");\n    ogAll.label = \"All languages\";\n    for (const loc of all)\n        ogAll.append(new Option(LOCALE_LABELS[loc], loc, false, loc === current));\n    localeSelect.append(ogAll);\n    localeSelect.value = current;\n}\n/* 6) Global UI state */\nconst UI = {\n    locale: DEFAULT_LOCALE,\n    ui: UI_STRINGS[DEFAULT_LOCALE],\n};\nlet I18N = makeI18n(UI.locale, MESSAGES[UI.locale], { ml: \"ml\" });\n/* 7) One-time UI builders */\nfunction buildQuickPicks() {\n    quickPicksEl.innerHTML = \"\";\n    quickPicksEl.setAttribute(\"aria-label\", UI.ui.quickPicksAria);\n    for (const v of QUICK_MG) {\n        const btn = document.createElement(\"button\");\n        btn.type = \"button\";\n        btn.dataset.mg = String(v);\n        btn.className =\n            \"inline-flex items-center rounded-md bg-zinc-100 px-2 py-1 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700 dark:hover:bg-zinc-700\";\n        btn.textContent = I18N.format.mg(v);\n        btn.addEventListener(\"click\", () => {\n            desiredInput.value = String(v);\n            render();\n            writeUrlState({\n                locale: UI.locale,\n                pen: Number(penSelect.value),\n                dose: Number(v),\n            });\n        });\n        quickPicksEl.appendChild(btn);\n    }\n}\n/* 8) Rendering helpers */\nfunction clear(el) {\n    while (el.firstChild)\n        el.removeChild(el.firstChild);\n}\nfunction el(tag, className, text) {\n    const node = document.createElement(tag);\n    if (className)\n        node.className = className;\n    if (text != null)\n        node.textContent = text;\n    return node;\n}\nfunction chip(text) {\n    return el(\"span\", \"inline-flex items-center rounded-md bg-zinc-100 px-2 py-0.5 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700\", text);\n}\nfunction setDesiredStep() {\n    const step = mgPerClick(Number(penSelect.value)) || 0.01;\n    desiredInput.step = toFixedTrim(step, DEFAULT_DECIMALS);\n    stepHintEl.textContent = UI.ui.stepHint(I18N.format.mg(step));\n}\n/* 9) Apply locale */\nfunction applyLocale(loc) {\n    UI.locale = loc;\n    I18N = makeI18n(loc, MESSAGES[loc], { ml: \"ml\" });\n    UI.ui = UI_STRINGS[loc];\n    document.documentElement.lang = HTML_LANG[loc];\n    document.documentElement.dir = LOCALE_DIR[loc] || \"ltr\";\n    // Static labels\n    titleEl.textContent = UI.ui.title;\n    haveLabelEl.textContent = UI.ui.haveLabel;\n    wantLabelEl.textContent = UI.ui.wantLabel;\n    disclaimerEl.textContent = UI.ui.disclaimer;\n    // Hint with localized example \"60 clicks\"\n    penHintEl.textContent = UI.ui.penHint(I18N.format.integer(CLICKS_PER_DOSE));\n    // Input mg suffix and placeholder\n    const mgSuffixEl = desiredInput.parentElement?.querySelector(\"span\");\n    if (mgSuffixEl)\n        mgSuffixEl.textContent = UI.ui.mgSuffix;\n    desiredInput.placeholder = UI.ui.desiredPlaceholder(I18N.format.mg(5));\n    // Rebuild quick picks (localized numbers) and accessibility labels\n    buildQuickPicks();\n    penSelect.setAttribute(\"aria-label\", UI.ui.ariaPen);\n    desiredInput.setAttribute(\"aria-label\", UI.ui.ariaDesired);\n    // Title and picker value\n    document.title = UI.ui.title;\n    localeSelect.value = loc;\n    // Re-render with the same pen/dose currently in the controls\n    setDesiredStep();\n    render();\n}\n/* 10) Main render */\nfunction render() {\n    const penMg = Number(penSelect.value);\n    const desired = desiredInput.valueAsNumber;\n    setDesiredStep();\n    clear(resultEl);\n    if (!Number.isFinite(desired) || desired <= 0) {\n        resultEl.append(el(\"div\", \"text-sm text-zinc-500\", UI.ui.enterDosePrompt));\n        return;\n    }\n    const plan = planClicks({\n        mgPerDose: penMg,\n        desiredMg: desired,\n        clicksPerDose: CLICKS_PER_DOSE,\n        volumePerDoseMl: VOLUME_PER_DOSE_ML,\n        i18n: I18N,\n    });\n    const headerRow = el(\"div\", \"flex items-baseline gap-2 mb-3\");\n    headerRow.append(el(\"h2\", \"text-lg font-semibold\", UI.ui.resultHeading), el(\"span\", \"text-xs text-zinc-500\", UI.ui.summary(I18N.format.mg(penMg), I18N.format.mg(desired))));\n    resultEl.append(headerRow);\n    const grid = el(\"div\", \"grid grid-cols-1 gap-2 sm:grid-cols-2\");\n    // Click sets\n    const setsCard = el(\"div\", \"rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50\");\n    setsCard.append(el(\"div\", \"text-sm text-zinc-600 dark:text-zinc-300\", UI.ui.clickSets));\n    const setsLine = el(\"div\", \"mt-1 text-base font-medium\");\n    plan.clickSets.forEach((n, i) => {\n        if (i > 0)\n            setsLine.append(el(\"span\", \"mx-1 text-zinc-400\", \"+\"));\n        setsLine.append(chip(String(n)));\n    });\n    setsCard.append(setsLine);\n    setsCard.append(el(\"div\", \"text-xs text-zinc-500\", UI.ui.totalClicksLine(I18N.format.integer(plan.totalClicks))));\n    // Volume\n    const volCard = el(\"div\", \"rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50\");\n    volCard.append(el(\"div\", \"text-sm text-zinc-600 dark:text-zinc-300\", UI.ui.totalVolume));\n    volCard.append(el(\"div\", \"mt-1 text-base font-medium\", I18N.format.ml(plan.totalVolumeMl)));\n    volCard.append(el(\"div\", \"text-xs text-zinc-500\", UI.ui.perClickAndDose(I18N.format.ml(plan.perClick.ml), I18N.format.mg(plan.perClick.mg))));\n    grid.append(setsCard, volCard);\n    resultEl.append(grid);\n    // Delivered vs requested\n    resultEl.append(el(\"div\", \"mt-3 text-sm\", `${UI.ui.deliveredDose}: ${I18N.format.mg(plan.deliveredMg)} (${UI.ui.requested}: ${I18N.format.mg(plan.requestedMg)})`));\n    // Warnings\n    if (plan.warnings.length) {\n        const ul = el(\"ul\", \"mt-2 list-disc pl-5 text-sm text-amber-700 dark:text-amber-400\");\n        plan.warnings.forEach((w) => ul.append(el(\"li\", undefined, w)));\n        resultEl.append(ul);\n    }\n}\n/* 11) Events */\nformEl.addEventListener(\"change\", (e) => {\n    const t = e.target;\n    if (!t)\n        return;\n    if (t.id === \"pen-mg\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n    if (t.id === \"desired-mg-input\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n});\nformEl.addEventListener(\"input\", (e) => {\n    const t = e.target;\n    if (t && t.id === \"desired-mg-input\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n});\n// Arrow keys: step by exact click (no float drift)\ndesiredInput.addEventListener(\"keydown\", (e) => {\n    if (e.key !== \"ArrowUp\" && e.key !== \"ArrowDown\")\n        return;\n    const step = mgPerClick(Number(penSelect.value));\n    if (!(step > 0))\n        return;\n    e.preventDefault();\n    const dir = e.key === \"ArrowUp\" ? 1 : -1;\n    const current = Number.isFinite(desiredInput.valueAsNumber)\n        ? desiredInput.valueAsNumber\n        : 0;\n    let clicks = Math.round(current / step);\n    clicks += dir;\n    const next = clicks * step;\n    desiredInput.value = toFixedTrim(next, DEFAULT_DECIMALS);\n    render();\n    writeUrlState({\n        locale: UI.locale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n});\nlocaleSelect.addEventListener(\"change\", () => {\n    const loc = localeSelect.value;\n    if (!(loc in LOCALE_LABELS))\n        return;\n    applyLocale(loc);\n    writeUrlState({\n        locale: UI.locale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n});\n/* 12) Boot */\nif (copyright) {\n    copyright.textContent = String(new Date().getFullYear());\n}\n// 1) Read incoming URL ONCE\nconst incoming = readUrlState();\n// 2) Decide initial locale (URL -> stored -> navigator -> default)\nconst initialLocale = incoming.locale ??\n    localStorage.getItem(\"clickdose.locale\") ??\n    matchNavigatorLocale() ??\n    DEFAULT_LOCALE;\n// 3) Build the language picker and apply locale (does NOT write URL)\nbuildLocaleOptions(initialLocale);\napplyLocale(initialLocale);\n// 4) Apply pen and dose from URL to the controls (then write URL once)\n(() => {\n    // Pen must be one of the known strengths\n    const allowed = new Set([2.5, 5, 7.5, 10, 12.5, 15]);\n    if (incoming.pen && allowed.has(incoming.pen)) {\n        penSelect.value = String(incoming.pen);\n    }\n    // Dose: any positive number\n    if (incoming.dose && incoming.dose > 0) {\n        desiredInput.value = toFixedTrim(incoming.dose, DEFAULT_DECIMALS);\n    }\n    else {\n        desiredInput.value = \"5\";\n    }\n    // Now that controls reflect the final initial state, write it to the URL\n    writeUrlState({\n        locale: initialLocale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n    // Render once with the just-applied state\n    render();\n})();\n"],"names":["defaultMessages","makeI18n","locale","overrides","units","numberFormat","msgs","u","mg","ml","nfMg","Intl","NumberFormat","maximumFractionDigits","nfMl","nfInt","integer","t","key","params","template","replace","_","k","undefined","String","interpolate","format","n","partitionWithK","total","K","min","max","target","scoreValue","v","score","Math","pow","dp","Array","from","length","fill","Number","POSITIVE_INFINITY","back","i","minSum","maxSum","s","sPrevMin","sPrevMax","vMin","vMax","prevScore","cand","sets","LOCALES","DEFAULT_LOCALE","LOCALE_LABELS","cy","ar","HTML_LANG","matchNavigatorLocale","navigator","languages","language","filter","Boolean","code","lc","toLowerCase","startsWith","UI_STRINGS","title","haveLabel","wantLabel","resultHeading","clickSets","totalVolume","deliveredDose","requested","disclaimer","penWord","ariaPen","ariaDesired","penHint","summary","p","perClickAndDose","totalClicksLine","stepHint","enterDosePrompt","quickPicksAria","mgSuffix","desiredPlaceholder","ex","LOCALE_DIR","MESSAGES","QUICK_MG","requireEl","id","el","document","getElementById","Error","toFixedTrim","decimals","round","roundTo","toFixed","mgPerClick","penMg","formEl","penSelect","desiredInput","quickPicksEl","stepHintEl","resultEl","titleEl","haveLabelEl","wantLabelEl","disclaimerEl","penHintEl","localeSelect","copyright","writeUrlState","state","url","URL","location","href","searchParams","set","pen","dose","delete","history","replaceState","toString","localStorage","setItem","UI","ui","I18N","tag","className","text","node","createElement","textContent","setDesiredStep","step","value","applyLocale","loc","documentElement","lang","dir","mgSuffixEl","parentElement","querySelector","placeholder","innerHTML","setAttribute","btn","type","dataset","addEventListener","render","appendChild","buildQuickPicks","desired","valueAsNumber","firstChild","removeChild","clear","isFinite","append","plan","input","mgPerDose","desiredMg","clicksPerDose","volumePerDoseMl","maxClicksPerSet","minClicksPerSet","roundingMode","i18n","warnings","mlPerClick","totalClicks","x","mode","floor","ceil","roundByMode","totalVolumeMl","requestedMg","deliveredMg","perClick","deltaMg","abs","push","delivered","delta","opts","altK","partitionClicksNicely","some","c","planClicks","headerRow","grid","setsCard","setsLine","forEach","volCard","ul","w","e","preventDefault","current","clicks","next","Date","getFullYear","incoming","qs","URLSearchParams","search","get","penNum","doseNum","includes","readUrlState","initialLocale","getItem","suggested","Map","nav","all","Object","keys","sort","a","b","localeCompare","sensitivity","size","og","label","Option","ogAll","buildLocaleOptions","allowed","Set","has"],"sourceRoot":""}