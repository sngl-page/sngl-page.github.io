{"version":3,"file":"assets/main.42e8563ef73ff2f3322e.js","mappings":"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","sources":["webpack://pen-click-dose-calculator/./src/lib/clickPlanner.ts","webpack://pen-click-dose-calculator/./src/i18n/index.ts","webpack://pen-click-dose-calculator/./src/index.ts"],"sourcesContent":["// --- i18n primitives ---------------------------------------------------------\nconst defaultMessages = {\n    \"err.mgPerDose\": \"mgPerDose must be > 0\",\n    \"err.clicksPerDose\": \"clicksPerDose must be > 0\",\n    \"err.volumePerDose\": \"volumePerDoseMl must be > 0\",\n    \"err.desiredMg\": \"desiredMg must be >= 0\",\n    \"err.minMax\": \"Invalid min/max clicks per set\",\n    \"warn.roundedToZero\": \"Rounded to 0 clicks.\",\n    \"warn.deltaMg\": \"Delivered dose ({delivered}) differs from requested ({requested}) by {delta}. Consider adjusting the rounding mode.\",\n    \"warn.totalBelowMin\": \"Total clicks ({total}) is below the recommended minimum of {min}. Very small sets can be unreliable.\",\n    \"warn.smallSet\": \"One or more sets are below {min} clicks; consider a different rounding mode or target.\",\n    \"warn.largeSet\": \"One or more sets exceed {max} clicks; this should not occur with the constraints.\",\n    \"warn.partitionFail\": \"Could not find a partition meeting constraints; returning a single set.\",\n};\nfunction interpolate(template, params) {\n    if (!params)\n        return template;\n    return template.replace(/\\{(\\w+)\\}/g, (_, k) => params[k] === undefined || params[k] === null ? \"\" : String(params[k]));\n}\n/**\n * Factory for a simple i18n instance.\n * - locale: Intl locale, e.g. \"en-GB\", \"es-ES\"\n * - overrides: provide your own messages for any keys you want to translate\n * - units: override unit labels if needed (\"mg\", \"ml\")\n * - numberFormat: tweak digits/formatting\n */\nexport function makeI18n(locale = \"en-GB\", overrides, units, numberFormat) {\n    const msgs = { ...defaultMessages, ...overrides };\n    const u = { mg: \"mg\", ml: \"ml\", ...units };\n    const nfMg = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 3,\n        ...(numberFormat?.mg ?? {}),\n    });\n    const nfMl = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 3,\n        ...(numberFormat?.ml ?? {}),\n    });\n    const nfInt = new Intl.NumberFormat(locale, {\n        maximumFractionDigits: 0,\n        ...(numberFormat?.integer ?? {}),\n    });\n    const NBSP = \"\\u00A0\"; // non-breaking space\n    return {\n        locale,\n        t: (key, params) => interpolate(msgs[key] ?? key, params),\n        format: {\n            mg: (n) => `${nfMg.format(n)}${NBSP}${u.mg}`,\n            ml: (n) => `${nfMl.format(n)}${NBSP}${u.ml}`,\n            integer: (n) => nfInt.format(n),\n        },\n    };\n}\n// --- public API --------------------------------------------------------------\nexport function planClicks(input) {\n    const { mgPerDose, desiredMg, clicksPerDose = 60, volumePerDoseMl = 0.6, maxClicksPerSet = 60, minClicksPerSet = 10, roundingMode = \"nearest\", i18n = makeI18n(), // default English\n     } = input;\n    const warnings = [];\n    // Validation (localized)\n    if (mgPerDose <= 0)\n        throw new Error(i18n.t(\"err.mgPerDose\"));\n    if (clicksPerDose <= 0)\n        throw new Error(i18n.t(\"err.clicksPerDose\"));\n    if (volumePerDoseMl <= 0)\n        throw new Error(i18n.t(\"err.volumePerDose\"));\n    if (desiredMg < 0)\n        throw new Error(i18n.t(\"err.desiredMg\"));\n    if (minClicksPerSet <= 0 || maxClicksPerSet < minClicksPerSet) {\n        throw new Error(i18n.t(\"err.minMax\"));\n    }\n    const mgPerClick = mgPerDose / clicksPerDose;\n    const mlPerClick = volumePerDoseMl / clicksPerDose;\n    const exactClicks = desiredMg / mgPerClick;\n    function roundByMode(x, mode) {\n        switch (mode) {\n            case \"down\":\n                return Math.floor(x);\n            case \"up\":\n                return Math.ceil(x);\n            case \"nearest\":\n            default:\n                return Math.round(x);\n        }\n    }\n    let totalClicks = roundByMode(exactClicks, roundingMode);\n    if (desiredMg === 0 || totalClicks === 0) {\n        return {\n            totalClicks: 0,\n            clickSets: [],\n            totalVolumeMl: 0,\n            requestedMg: desiredMg,\n            deliveredMg: 0,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings: desiredMg === 0\n                ? warnings\n                : [...warnings, i18n.t(\"warn.roundedToZero\")],\n        };\n    }\n    const deliveredMg = totalClicks * mgPerClick;\n    const deltaMg = deliveredMg - desiredMg;\n    // If the difference is more than half a click’s mg, let user know.\n    if (Math.abs(deltaMg) > mgPerClick / 2) {\n        warnings.push(i18n.t(\"warn.deltaMg\", {\n            delivered: i18n.format.mg(deliveredMg),\n            requested: i18n.format.mg(desiredMg),\n            delta: i18n.format.mg(Math.abs(deltaMg)),\n        }));\n    }\n    if (totalClicks < minClicksPerSet) {\n        warnings.push(i18n.t(\"warn.totalBelowMin\", {\n            total: i18n.format.integer(totalClicks),\n            min: i18n.format.integer(minClicksPerSet),\n        }));\n        return {\n            totalClicks,\n            clickSets: [totalClicks],\n            totalVolumeMl: totalClicks * mlPerClick,\n            requestedMg: desiredMg,\n            deliveredMg,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings,\n        };\n    }\n    const clickSets = partitionClicksNicely(totalClicks, {\n        min: minClicksPerSet,\n        max: maxClicksPerSet,\n    });\n    if (!clickSets || clickSets.length === 0) {\n        warnings.push(i18n.t(\"warn.partitionFail\"));\n        return {\n            totalClicks,\n            clickSets: [totalClicks],\n            totalVolumeMl: totalClicks * mlPerClick,\n            requestedMg: desiredMg,\n            deliveredMg,\n            perClick: { mg: mgPerClick, ml: mlPerClick },\n            warnings,\n        };\n    }\n    if (clickSets.some((c) => c < minClicksPerSet)) {\n        warnings.push(i18n.t(\"warn.smallSet\", { min: i18n.format.integer(minClicksPerSet) }));\n    }\n    if (clickSets.some((c) => c > maxClicksPerSet)) {\n        warnings.push(i18n.t(\"warn.largeSet\", { max: i18n.format.integer(maxClicksPerSet) }));\n    }\n    return {\n        totalClicks,\n        clickSets,\n        totalVolumeMl: totalClicks * mlPerClick,\n        requestedMg: desiredMg,\n        deliveredMg,\n        perClick: { mg: mgPerClick, ml: mlPerClick },\n        warnings,\n    };\n}\n// --- partitioning internals (unchanged logic) --------------------------------\nfunction partitionClicksNicely(total, opts) {\n    const { min, max } = opts;\n    const K = Math.ceil(total / max);\n    if (K <= 0)\n        return [];\n    if (K === 1 && total >= min && total <= max)\n        return [total];\n    if (total < K * min) {\n        const altK = Math.max(1, Math.floor(total / min));\n        if (altK >= 1 && total <= altK * max && total >= altK * min) {\n            return partitionWithK(total, altK, min, max);\n        }\n    }\n    return partitionWithK(total, K, min, max);\n}\nfunction partitionWithK(total, K, min, max) {\n    const balanceWeight = 0.05;\n    const tensBonus = 2.0;\n    const fivePenalty = 1.0;\n    const nonFivePenalty = 3.0;\n    const atMinPenalty = 4.0;\n    const target = total / K;\n    function scoreValue(v) {\n        let score = balanceWeight * Math.pow(v - target, 2);\n        if (v % 10 === 0)\n            score -= tensBonus;\n        else if (v % 5 === 0)\n            score += fivePenalty;\n        else\n            score += nonFivePenalty;\n        if (v === min)\n            score += atMinPenalty;\n        return score;\n    }\n    const dp = Array.from({ length: K + 1 }, () => Array(total + 1).fill(Number.POSITIVE_INFINITY));\n    const back = Array.from({ length: K + 1 }, () => Array(total + 1).fill(-1));\n    dp[0][0] = 0;\n    for (let i = 1; i <= K; i++) {\n        const minSum = i * min;\n        const maxSum = Math.min(total, i * max);\n        for (let s = minSum; s <= maxSum; s++) {\n            const sPrevMin = (i - 1) * min;\n            const sPrevMax = Math.min(total, (i - 1) * max);\n            const vMin = Math.max(min, s - sPrevMax);\n            const vMax = Math.min(max, s - sPrevMin);\n            for (let v = vMin; v <= vMax; v++) {\n                const prevScore = dp[i - 1][s - v];\n                if (prevScore === Number.POSITIVE_INFINITY)\n                    continue;\n                const cand = prevScore + scoreValue(v);\n                if (cand < dp[i][s]) {\n                    dp[i][s] = cand;\n                    back[i][s] = v;\n                }\n            }\n        }\n    }\n    if (dp[K][total] === Number.POSITIVE_INFINITY)\n        return [];\n    const sets = new Array(K);\n    let s = total;\n    for (let i = K; i >= 1; i--) {\n        const v = back[i][s];\n        if (v < 0)\n            return [];\n        sets[i - 1] = v;\n        s -= v;\n    }\n    return sets;\n}\n","/* Locale list and types */\nexport const LOCALES = [\n    \"en-GB\",\n    \"fr-FR\",\n    \"de-DE\",\n    \"pl-PL\",\n    \"ro-RO\",\n    \"es-ES\",\n    \"pt-PT\",\n    \"it-IT\",\n    \"cy\",\n    \"bn-BD\",\n    \"tr-TR\",\n    \"zh-Hans\",\n    \"uk-UA\",\n];\nexport const DEFAULT_LOCALE = \"en-GB\";\n/* Self-names for the picker */\nexport const LOCALE_LABELS = {\n    \"en-GB\": \"English (UK)\",\n    \"fr-FR\": \"Français\",\n    \"de-DE\": \"Deutsch\",\n    \"pl-PL\": \"Polski\",\n    \"ro-RO\": \"Română\",\n    \"es-ES\": \"Español\",\n    \"pt-PT\": \"Português (PT)\",\n    \"it-IT\": \"Italiano\",\n    cy: \"Cymraeg\",\n    \"bn-BD\": \"বাংলা (বাংলাদেশ)\",\n    \"tr-TR\": \"Türkçe\",\n    \"zh-Hans\": \"简体中文\",\n    \"uk-UA\": \"Українська\",\n};\n/* html lang attribute values */\nexport const HTML_LANG = {\n    \"en-GB\": \"en\",\n    \"fr-FR\": \"fr\",\n    \"de-DE\": \"de\",\n    \"pl-PL\": \"pl\",\n    \"ro-RO\": \"ro\",\n    \"es-ES\": \"es\",\n    \"pt-PT\": \"pt\",\n    \"it-IT\": \"it\",\n    cy: \"cy\",\n    \"bn-BD\": \"bn\",\n    \"tr-TR\": \"tr\",\n    \"zh-Hans\": \"zh-Hans\",\n    \"uk-UA\": \"uk\",\n};\n/* Optional helper: best-effort navigator match */\nexport function matchNavigatorLocale() {\n    if (typeof navigator === \"undefined\")\n        return null;\n    const cand = [...(navigator.languages || []), navigator.language].filter(Boolean);\n    for (const code of cand) {\n        const lc = code.toLowerCase();\n        if (lc.startsWith(\"en\"))\n            return \"en-GB\";\n        if (lc.startsWith(\"fr\"))\n            return \"fr-FR\";\n        if (lc.startsWith(\"de\"))\n            return \"de-DE\";\n        if (lc.startsWith(\"pl\"))\n            return \"pl-PL\";\n        if (lc.startsWith(\"ro\"))\n            return \"ro-RO\";\n        if (lc.startsWith(\"es\"))\n            return \"es-ES\";\n        if (lc.startsWith(\"pt\"))\n            return \"pt-PT\";\n        if (lc.startsWith(\"it\"))\n            return \"it-IT\";\n        if (lc.startsWith(\"cy\"))\n            return \"cy\";\n        if (lc.startsWith(\"bn\"))\n            return \"bn-BD\";\n        if (lc.startsWith(\"tr\"))\n            return \"tr-TR\";\n        if (lc.startsWith(\"uk\"))\n            return \"uk-UA\";\n        if (lc.startsWith(\"zh\"))\n            return \"zh-Hans\"; // map any Chinese to Simplified for now\n    }\n    return null;\n}\n/* UI strings per locale */\nexport const UI_STRINGS = {\n    \"en-GB\": {\n        title: \"Pen Click Dose Calculator\",\n        haveLabel: \"I have a\",\n        wantLabel: \"I want a dose of\",\n        resultHeading: \"Result\",\n        clickSets: \"Click sets\",\n        totalVolume: \"Total volume\",\n        deliveredDose: \"Delivered dose\",\n        requested: \"requested\",\n        disclaimer: \"This tool performs arithmetic planning only. Always follow your device’s instructions and consult a clinician or pharmacist for dosing decisions.\",\n        penWord: \"pen\",\n        ariaPen: \"Pen strength (mg per full dose)\",\n        ariaDesired: \"Desired dose (mg)\",\n        penHint: (n) => `This is the labelled dose per full dial (e.g. ${n} clicks).`,\n        summary: (p, t) => `(Pen: ${p}; Target: ${t})`,\n        perClickAndDose: (ml, mg) => `Per click: ${ml}; Per click dose: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clicks`,\n        stepHint: (s) => `Step: ${s} per click`,\n        enterDosePrompt: \"Enter a dose to see the plan.\",\n        quickPicksAria: \"Quick picks\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `e.g. ${ex}`,\n    },\n    \"fr-FR\": {\n        title: \"Calculateur de dose par clic\",\n        haveLabel: \"J’ai un\",\n        wantLabel: \"Je veux une dose de\",\n        resultHeading: \"Résultat\",\n        clickSets: \"Ensembles de clics\",\n        totalVolume: \"Volume total\",\n        deliveredDose: \"Dose délivrée\",\n        requested: \"demandée\",\n        disclaimer: \"Cet outil ne fournit qu’une aide de calcul. Suivez toujours les instructions de votre appareil et demandez conseil à un professionnel de santé.\",\n        penWord: \"stylo\",\n        ariaPen: \"Force du stylo (mg par dose complète)\",\n        ariaDesired: \"Dose souhaitée (mg)\",\n        penHint: (n) => `Ceci est la dose indiquée pour un tour complet (p. ex. ${n}\\u202fclics).`,\n        summary: (p, t) => `(Stylo\\u202f: ${p}\\u202f; Objectif\\u202f: ${t})`,\n        perClickAndDose: (ml, mg) => `Par clic\\u202f: ${ml}\\u202f; Dose par clic\\u202f: ${mg}`,\n        totalClicksLine: (n) => `Total\\u202f: ${n} clics`,\n        stepHint: (s) => `Pas\\u202f: ${s} par clic`,\n        enterDosePrompt: \"Saisissez une dose pour afficher le plan.\",\n        quickPicksAria: \"Raccourcis\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `p. ex. ${ex}`,\n    },\n    \"de-DE\": {\n        title: \"Klick‑Dosis‑Rechner\",\n        haveLabel: \"Ich habe einen\",\n        wantLabel: \"Ich möchte eine Dosis von\",\n        resultHeading: \"Ergebnis\",\n        clickSets: \"Klick‑Sets\",\n        totalVolume: \"Gesamtvolumen\",\n        deliveredDose: \"Abgegebene Dosis\",\n        requested: \"gewünscht\",\n        disclaimer: \"Dieses Werkzeug liefert nur eine rechnerische Planung. Befolgen Sie stets die Anweisungen Ihres Geräts und lassen Sie sich medizinisch beraten.\",\n        penWord: \"Pen\",\n        ariaPen: \"Pen‑Stärke (mg pro Volldosis)\",\n        ariaDesired: \"Gewünschte Dosis (mg)\",\n        penHint: (n) => `Dies ist die angegebene Dosis pro voller Drehung (z. B. ${n} Klicks).`,\n        summary: (p, t) => `(Pen: ${p}; Ziel: ${t})`,\n        perClickAndDose: (ml, mg) => `Pro Klick: ${ml}; Dosis pro Klick: ${mg}`,\n        totalClicksLine: (n) => `Summe: ${n} Klicks`,\n        stepHint: (s) => `Schrittweite: ${s} pro Klick`,\n        enterDosePrompt: \"Geben Sie eine Dosis ein, um den Plan zu sehen.\",\n        quickPicksAria: \"Schnellauswahl\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `z. B. ${ex}`,\n    },\n    \"pl-PL\": {\n        title: \"Kalkulator dawki na klik\",\n        haveLabel: \"Mam\",\n        wantLabel: \"Chcę dawkę\",\n        resultHeading: \"Wynik\",\n        clickSets: \"Zestawy kliknięć\",\n        totalVolume: \"Całkowita objętość\",\n        deliveredDose: \"Podana dawka\",\n        requested: \"docelowa\",\n        disclaimer: \"To narzędzie służy wyłącznie do obliczeń. Zawsze postępuj zgodnie z instrukcjami urządzenia i skonsultuj dawkę z pracownikiem ochrony zdrowia.\",\n        penWord: \"pen\",\n        ariaPen: \"Moc pena (mg na pełną dawkę)\",\n        ariaDesired: \"Docelowa dawka (mg)\",\n        penHint: (n) => `To jest dawka oznaczona dla pełnego obrotu (np. ${n} kliknięć).`,\n        summary: (p, t) => `(Pen: ${p}; Cel: ${t})`,\n        perClickAndDose: (ml, mg) => `Na klik: ${ml}; Dawka na klik: ${mg}`,\n        totalClicksLine: (n) => `Razem: ${n} kliknięć`,\n        stepHint: (s) => `Krok: ${s} na klik`,\n        enterDosePrompt: \"Wpisz dawkę, aby zobaczyć plan.\",\n        quickPicksAria: \"Szybki wybór\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `np. ${ex}`,\n    },\n    \"ro-RO\": {\n        title: \"Calculator doză pe clic\",\n        haveLabel: \"Am un\",\n        wantLabel: \"Vreau o doză de\",\n        resultHeading: \"Rezultat\",\n        clickSets: \"Seturi de clicuri\",\n        totalVolume: \"Volum total\",\n        deliveredDose: \"Doză administrată\",\n        requested: \"dorită\",\n        disclaimer: \"Acest instrument oferă doar calcule. Respectați instrucțiunile dispozitivului și consultați un specialist.\",\n        penWord: \"pen\",\n        ariaPen: \"Concentrația penului (mg per doză completă)\",\n        ariaDesired: \"Doza dorită (mg)\",\n        penHint: (n) => `Aceasta este doza indicată pentru o rotație completă (ex. ${n} clicuri).`,\n        summary: (p, t) => `(Pen: ${p}; Țintă: ${t})`,\n        perClickAndDose: (ml, mg) => `Per clic: ${ml}; Doză per clic: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clicuri`,\n        stepHint: (s) => `Pas: ${s} per clic`,\n        enterDosePrompt: \"Introduceți o doză pentru a vedea planul.\",\n        quickPicksAria: \"Selecții rapide\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `ex. ${ex}`,\n    },\n    \"es-ES\": {\n        title: \"Calculadora de dosis por clic\",\n        haveLabel: \"Tengo un\",\n        wantLabel: \"Quiero una dosis de\",\n        resultHeading: \"Resultado\",\n        clickSets: \"Conjuntos de clics\",\n        totalVolume: \"Volumen total\",\n        deliveredDose: \"Dosis administrada\",\n        requested: \"objetivo\",\n        disclaimer: \"Esta herramienta ofrece solo un cálculo orientativo. Siga las instrucciones del dispositivo y consulte a un profesional sanitario.\",\n        penWord: \"pluma\",\n        ariaPen: \"Fuerza de la pluma (mg por dosis completa)\",\n        ariaDesired: \"Dosis deseada (mg)\",\n        penHint: (n) => `Esta es la dosis indicada para una vuelta completa (p. ej., ${n} clics).`,\n        summary: (p, t) => `(Pluma: ${p}; Objetivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Por clic: ${ml}; Dosis por clic: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} clics`,\n        stepHint: (s) => `Paso: ${s} por clic`,\n        enterDosePrompt: \"Introduce una dosis para ver el plan.\",\n        quickPicksAria: \"Accesos rápidos\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `p. ej., ${ex}`,\n    },\n    \"pt-PT\": {\n        title: \"Calculadora de dose por clique\",\n        haveLabel: \"Tenho uma\",\n        wantLabel: \"Quero uma dose de\",\n        resultHeading: \"Resultado\",\n        clickSets: \"Conjuntos de cliques\",\n        totalVolume: \"Volume total\",\n        deliveredDose: \"Dose administrada\",\n        requested: \"pretendida\",\n        disclaimer: \"Esta ferramenta serve apenas para cálculo. Siga as instruções do dispositivo e consulte um profissional de saúde.\",\n        penWord: \"caneta\",\n        ariaPen: \"Força da caneta (mg por dose completa)\",\n        ariaDesired: \"Dose pretendida (mg)\",\n        penHint: (n) => `Esta é a dose indicada para uma volta completa (ex.: ${n} cliques).`,\n        summary: (p, t) => `(Caneta: ${p}; Objetivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Por clique: ${ml}; Dose por clique: ${mg}`,\n        totalClicksLine: (n) => `Total: ${n} cliques`,\n        stepHint: (s) => `Passo: ${s} por clique`,\n        enterDosePrompt: \"Introduza uma dose para ver o plano.\",\n        quickPicksAria: \"Atalhos\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `ex.: ${ex}`,\n    },\n    \"it-IT\": {\n        title: \"Calcolatore dose a clic\",\n        haveLabel: \"Ho una\",\n        wantLabel: \"Voglio una dose di\",\n        resultHeading: \"Risultato\",\n        clickSets: \"Set di clic\",\n        totalVolume: \"Volume totale\",\n        deliveredDose: \"Dose erogata\",\n        requested: \"richiesta\",\n        disclaimer: \"Questo strumento fornisce solo un calcolo orientativo. Segui le istruzioni del dispositivo e consulta un professionista sanitario.\",\n        penWord: \"penna\",\n        ariaPen: \"Forza della penna (mg per dose completa)\",\n        ariaDesired: \"Dose desiderata (mg)\",\n        penHint: (n) => `Questa è la dose indicata per un giro completo (es. ${n} clic).`,\n        summary: (p, t) => `(Penna: ${p}; Obiettivo: ${t})`,\n        perClickAndDose: (ml, mg) => `Per clic: ${ml}; Dose per clic: ${mg}`,\n        totalClicksLine: (n) => `Totale: ${n} clic`,\n        stepHint: (s) => `Passo: ${s} per clic`,\n        enterDosePrompt: \"Inserisci una dose per vedere il piano.\",\n        quickPicksAria: \"Scelte rapide\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `es. ${ex}`,\n    },\n    cy: {\n        title: \"Cyfrifiannell dos fesul clic\",\n        haveLabel: \"Mae gen i\",\n        wantLabel: \"Rwyf eisiau dos o\",\n        resultHeading: \"Canlyniad\",\n        clickSets: \"Setiau clic\",\n        totalVolume: \"Cyfaint cyfan\",\n        deliveredDose: \"Dos a roddwyd\",\n        requested: \"a ddymunir\",\n        disclaimer: \"Mae’r teclyn hwn ar gyfer cyfrifiadau yn unig. Dylech ddilyn cyfarwyddiadau eich dyfais a cheisio cyngor gan glinigydd neu fferyllydd.\",\n        penWord: \"pen\",\n        ariaPen: \"Cryfer pen (mg fesul dos llawn)\",\n        ariaDesired: \"Dos a ddymunir (mg)\",\n        penHint: (n) => `Dyma’r dos wedi’i labelu ar gyfer tro llawn (e.e. ${n} clic).`,\n        summary: (p, t) => `(Pen: ${p}; Targed: ${t})`,\n        perClickAndDose: (ml, mg) => `Fesul clic: ${ml}; Dos fesul clic: ${mg}`,\n        totalClicksLine: (n) => `Cyfanswm: ${n} clic`,\n        stepHint: (s) => `Cam: ${s} fesul clic`,\n        enterDosePrompt: \"Rhowch ddos i weld y cynllun.\",\n        quickPicksAria: \"Dewisiadau cyflym\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `e.e. ${ex}`,\n    },\n    \"bn-BD\": {\n        title: \"ক্লিকভিত্তিক ডোজ ক্যালকুলেটর\",\n        haveLabel: \"আমার আছে\",\n        wantLabel: \"আমি একটি ডোজ চাই\",\n        resultHeading: \"ফলাফল\",\n        clickSets: \"ক্লিক সেট\",\n        totalVolume: \"মোট ভলিউম\",\n        deliveredDose: \"প্রয়োগিত ডোজ\",\n        requested: \"লক্ষ্য\",\n        disclaimer: \"এই টুলটি শুধুমাত্র গণনার সহায়তা। আপনার ডিভাইসের নির্দেশনা অনুসরণ করুন এবং প্রয়োজনে স্বাস্থ্য‑পেশাদারের সাথে পরামর্শ করুন।\",\n        penWord: \"পেন\",\n        ariaPen: \"পেনের ক্ষমতা (পূর্ণ ডোজে mg)\",\n        ariaDesired: \"প্রয়োজনীয় ডোজ (mg)\",\n        penHint: (n) => `এটি সম্পূর্ণ এক টার্নের লেবেলকৃত ডোজ (যেমন, ${n} ক্লিক)।`,\n        summary: (p, t) => `(পেন: ${p}; লক্ষ্য: ${t})`,\n        perClickAndDose: (ml, mg) => `প্রতি ক্লিক: ${ml}; প্রতি ক্লিকে ডোজ: ${mg}`,\n        totalClicksLine: (n) => `মোট: ${n} ক্লিক`,\n        stepHint: (s) => `ধাপ: প্রতি ক্লিকে ${s}`,\n        enterDosePrompt: \"পরিকল্পনা দেখতে ডোজ লিখুন।\",\n        quickPicksAria: \"দ্রুত পছন্দ\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `যেমন ${ex}`,\n    },\n    \"tr-TR\": {\n        title: \"Tıklama doz hesaplayıcı\",\n        haveLabel: \"Bende\",\n        wantLabel: \"Şu dozu istiyorum\",\n        resultHeading: \"Sonuç\",\n        clickSets: \"Tıklama setleri\",\n        totalVolume: \"Toplam hacim\",\n        deliveredDose: \"Uygulanan doz\",\n        requested: \"hedef\",\n        disclaimer: \"Bu araç yalnızca hesaplama yardımı sağlar. Lütfen cihazınızın talimatlarına uyun ve bir sağlık profesyoneline danışın.\",\n        penWord: \"kalem\",\n        ariaPen: \"Kalem gücü (tam doz başına mg)\",\n        ariaDesired: \"İstenen doz (mg)\",\n        penHint: (n) => `Bu, tam tur için etiketli dozdur (örn. ${n} tıklama).`,\n        summary: (p, t) => `(Kalem: ${p}; Hedef: ${t})`,\n        perClickAndDose: (ml, mg) => `Tıklama başına: ${ml}; Tıklama başına doz: ${mg}`,\n        totalClicksLine: (n) => `Toplam: ${n} tıklama`,\n        stepHint: (s) => `Adım: tıklama başına ${s}`,\n        enterDosePrompt: \"Planı görmek için bir doz girin.\",\n        quickPicksAria: \"Hızlı seçimler\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `örn. ${ex}`,\n    },\n    \"zh-Hans\": {\n        title: \"点击剂量计算器\",\n        haveLabel: \"我有一支\",\n        wantLabel: \"我想要的剂量\",\n        resultHeading: \"结果\",\n        clickSets: \"点击组\",\n        totalVolume: \"总量\",\n        deliveredDose: \"实际剂量\",\n        requested: \"目标\",\n        disclaimer: \"本工具仅用于计算规划。请遵循设备说明，并咨询医疗专业人士。\",\n        penWord: \"注射笔\",\n        ariaPen: \"注射笔规格（mg/整剂）\",\n        ariaDesired: \"期望剂量（mg）\",\n        penHint: (n) => `这是旋钮转一圈的标称剂量（例如：${n} 次点击）。`,\n        summary: (p, t) => `（${\"注射笔\"}：${p}； 目标：${t}）`,\n        perClickAndDose: (ml, mg) => `每次点击：${ml}； 每次点击剂量：${mg}`,\n        totalClicksLine: (n) => `合计：${n} 次点击`,\n        stepHint: (s) => `步长：每次点击 ${s}`,\n        enterDosePrompt: \"输入剂量以查看计划。\",\n        quickPicksAria: \"快速选择\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `例如 ${ex}`,\n    },\n    \"uk-UA\": {\n        title: \"Калькулятор дози за кліками\",\n        haveLabel: \"У мене є\",\n        wantLabel: \"Мені потрібна доза\",\n        resultHeading: \"Результат\",\n        clickSets: \"Набори кліків\",\n        totalVolume: \"Загальний об’єм\",\n        deliveredDose: \"Фактична доза\",\n        requested: \"цільова\",\n        disclaimer: \"Цей інструмент слугує лише для розрахунків. Дотримуйтесь інструкцій вашого пристрою та консультуйтесь з медичним фахівцем.\",\n        penWord: \"шприц‑ручка\",\n        ariaPen: \"Сила шприц‑ручки (мг на повну дозу)\",\n        ariaDesired: \"Бажана доза (мг)\",\n        penHint: (n) => `Це маркована доза за повний оберт (напр., ${n} кліків).`,\n        summary: (p, t) => `(Ручка: ${p}; Ціль: ${t})`,\n        perClickAndDose: (ml, mg) => `За клік: ${ml}; Доза за клік: ${mg}`,\n        totalClicksLine: (n) => `Разом: ${n} кліків`,\n        stepHint: (s) => `Крок: ${s} за клік`,\n        enterDosePrompt: \"Введіть дозу, щоб побачити план.\",\n        quickPicksAria: \"Швидкий вибір\",\n        mgSuffix: \"mg\",\n        desiredPlaceholder: (ex) => `напр. ${ex}`,\n    },\n};\n/* Planner error/warning translations */\nexport const MESSAGES = {\n    \"en-GB\": {},\n    \"fr-FR\": {\n        \"err.mgPerDose\": \"mgPerDose doit être > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose doit être > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl doit être > 0\",\n        \"err.desiredMg\": \"desiredMg doit être ≥ 0\",\n        \"err.minMax\": \"Plage min/max de clics invalide\",\n        \"warn.roundedToZero\": \"Arrondi à 0 clic.\",\n        \"warn.deltaMg\": \"La dose délivrée ({delivered}) diffère de la dose demandée ({requested}) de {delta}. Envisagez d'ajuster le mode d'arrondi.\",\n        \"warn.totalBelowMin\": \"Le total de clics ({total}) est inférieur au minimum recommandé de {min}. Les très petits ensembles peuvent être peu fiables.\",\n        \"warn.smallSet\": \"Un ou plusieurs ensembles sont inférieurs à {min} clics; envisagez un autre mode d'arrondi ou un autre objectif.\",\n        \"warn.largeSet\": \"Un ou plusieurs ensembles dépassent {max} clics; cela ne devrait pas se produire avec ces contraintes.\",\n        \"warn.partitionFail\": \"Impossible de trouver une partition respectant les contraintes; un seul ensemble sera utilisé.\",\n    },\n    \"de-DE\": {\n        \"err.mgPerDose\": \"mgPerDose muss > 0 sein\",\n        \"err.clicksPerDose\": \"clicksPerDose muss > 0 sein\",\n        \"err.volumePerDose\": \"volumePerDoseMl muss > 0 sein\",\n        \"err.desiredMg\": \"desiredMg muss ≥ 0 sein\",\n        \"err.minMax\": \"Ungültiger Minimal-/Maximalbereich für Klicks\",\n        \"warn.roundedToZero\": \"Auf 0 Klicks gerundet.\",\n        \"warn.deltaMg\": \"Abgegebene Dosis ({delivered}) weicht von der gewünschten ({requested}) um {delta} ab. Passen Sie ggf. den Rundungsmodus an.\",\n        \"warn.totalBelowMin\": \"Gesamtanzahl der Klicks ({total}) liegt unter dem empfohlenen Minimum von {min}. Sehr kleine Sätze können unzuverlässig sein.\",\n        \"warn.smallSet\": \"Ein oder mehrere Sätze liegen unter {min} Klicks; erwägen Sie einen anderen Rundungsmodus oder Zielwert.\",\n        \"warn.largeSet\": \"Ein oder mehrere Sätze überschreiten {max} Klicks; dies sollte mit den Vorgaben nicht vorkommen.\",\n        \"warn.partitionFail\": \"Es konnte keine gültige Aufteilung gefunden werden; es wird ein einzelner Satz verwendet.\",\n    },\n    \"pl-PL\": {\n        \"err.mgPerDose\": \"mgPerDose musi być > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose musi być > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl musi być > 0\",\n        \"err.desiredMg\": \"desiredMg musi być ≥ 0\",\n        \"err.minMax\": \"Nieprawidłowy zakres min/max kliknięć\",\n        \"warn.roundedToZero\": \"Zaokrąglono do 0 kliknięć.\",\n        \"warn.deltaMg\": \"Podana dawka ({delivered}) różni się od docelowej ({requested}) o {delta}. Rozważ zmianę trybu zaokrąglania.\",\n        \"warn.totalBelowMin\": \"Łączna liczba kliknięć ({total}) jest poniżej zalecanego minimum {min}. Bardzo małe zestawy mogą być nieprecyzyjne.\",\n        \"warn.smallSet\": \"Jeden lub więcej zestawów ma mniej niż {min} kliknięć; rozważ inny tryb zaokrąglania lub inną dawkę docelową.\",\n        \"warn.largeSet\": \"Jeden lub więcej zestawów przekracza {max} kliknięć; nie powinno się to zdarzyć przy tych ograniczeniach.\",\n        \"warn.partitionFail\": \"Nie udało się znaleźć podziału spełniającego ograniczenia; użyto jednego zestawu.\",\n    },\n    \"ro-RO\": {\n        \"err.mgPerDose\": \"mgPerDose trebuie să fie > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose trebuie să fie > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl trebuie să fie > 0\",\n        \"err.desiredMg\": \"desiredMg trebuie să fie ≥ 0\",\n        \"err.minMax\": \"Interval minim/maxim de clicuri invalid\",\n        \"warn.roundedToZero\": \"Rotunjit la 0 clicuri.\",\n        \"warn.deltaMg\": \"Doza administrată ({delivered}) diferă de cea dorită ({requested}) cu {delta}. Luați în considerare ajustarea modului de rotunjire.\",\n        \"warn.totalBelowMin\": \"Numărul total de clicuri ({total}) este sub minimul recomandat de {min}. Seturile foarte mici pot fi nesigure.\",\n        \"warn.smallSet\": \"Unul sau mai multe seturi sunt sub {min} clicuri; luați în considerare alt mod de rotunjire sau altă țintă.\",\n        \"warn.largeSet\": \"Unul sau mai multe seturi depășesc {max} clicuri; nu ar trebui să se întâmple cu aceste constrângeri.\",\n        \"warn.partitionFail\": \"Nu s-a putut găsi o împărțire validă; se utilizează un singur set.\",\n    },\n    \"es-ES\": {\n        \"err.mgPerDose\": \"mgPerDose debe ser > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose debe ser > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl debe ser > 0\",\n        \"err.desiredMg\": \"desiredMg debe ser ≥ 0\",\n        \"err.minMax\": \"Rango mínimo/máximo de clics no válido\",\n        \"warn.roundedToZero\": \"Redondeado a 0 clics.\",\n        \"warn.deltaMg\": \"La dosis administrada ({delivered}) difiere de la objetivo ({requested}) en {delta}. Considere ajustar el modo de redondeo.\",\n        \"warn.totalBelowMin\": \"El total de clics ({total}) está por debajo del mínimo recomendado de {min}. Los conjuntos muy pequeños pueden ser poco fiables.\",\n        \"warn.smallSet\": \"Uno o más conjuntos están por debajo de {min} clics; considere otro modo de redondeo u otro objetivo.\",\n        \"warn.largeSet\": \"Uno o más conjuntos superan {max} clics; no debería ocurrir con estas restricciones.\",\n        \"warn.partitionFail\": \"No se pudo encontrar una partición válida; se usará un único conjunto.\",\n    },\n    \"pt-PT\": {\n        \"err.mgPerDose\": \"mgPerDose tem de ser > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose tem de ser > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl tem de ser > 0\",\n        \"err.desiredMg\": \"desiredMg tem de ser ≥ 0\",\n        \"err.minMax\": \"Intervalo mínimo/máximo de cliques inválido\",\n        \"warn.roundedToZero\": \"Arredondado para 0 cliques.\",\n        \"warn.deltaMg\": \"A dose administrada ({delivered}) difere da pretendida ({requested}) em {delta}. Considere ajustar o modo de arredondamento.\",\n        \"warn.totalBelowMin\": \"O total de cliques ({total}) está abaixo do mínimo recomendado de {min}. Conjuntos muito pequenos podem ser pouco fiáveis.\",\n        \"warn.smallSet\": \"Um ou mais conjuntos estão abaixo de {min} cliques; considere outro modo de arredondamento ou um alvo diferente.\",\n        \"warn.largeSet\": \"Um ou mais conjuntos excedem {max} cliques; isto não deveria acontecer com estas restrições.\",\n        \"warn.partitionFail\": \"Não foi possível encontrar uma divisão válida; será usado um único conjunto.\",\n    },\n    \"it-IT\": {\n        \"err.mgPerDose\": \"mgPerDose deve essere > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose deve essere > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl deve essere > 0\",\n        \"err.desiredMg\": \"desiredMg deve essere ≥ 0\",\n        \"err.minMax\": \"Intervallo minimo/massimo di clic non valido\",\n        \"warn.roundedToZero\": \"Arrotondato a 0 clic.\",\n        \"warn.deltaMg\": \"La dose erogata ({delivered}) differisce da quella richiesta ({requested}) di {delta}. Valuta di modificare la modalità di arrotondamento.\",\n        \"warn.totalBelowMin\": \"Il totale dei clic ({total}) è inferiore al minimo consigliato di {min}. Set molto piccoli possono essere imprecisi.\",\n        \"warn.smallSet\": \"Uno o più set sono sotto {min} clic; valuta un arrotondamento diverso o un obiettivo diverso.\",\n        \"warn.largeSet\": \"Uno o più set superano {max} clic; non dovrebbe accadere con questi vincoli.\",\n        \"warn.partitionFail\": \"Impossibile trovare una suddivisione valida; verrà usato un singolo set.\",\n    },\n    cy: {\n        \"err.mgPerDose\": \"Rhaid i mgPerDose fod yn > 0\",\n        \"err.clicksPerDose\": \"Rhaid i clicksPerDose fod yn > 0\",\n        \"err.volumePerDose\": \"Rhaid i volumePerDoseMl fod yn > 0\",\n        \"err.desiredMg\": \"Rhaid i desiredMg fod yn ≥ 0\",\n        \"err.minMax\": \"Amrediad isaf/uchel cliciau annilys\",\n        \"warn.roundedToZero\": \"Wedi’i dalgrynnu i 0 clic.\",\n        \"warn.deltaMg\": \"Mae’r dos a roddwyd ({delivered}) yn wahanol i’r targed ({requested}) o {delta}. Ystyriwch newid y modd talgrynnu.\",\n        \"warn.totalBelowMin\": \"Mae cyfanswm y cliciau ({total}) yn is na’r lleiafswm a argymhellir o {min}. Gall setiau bach fod yn annibynadwy.\",\n        \"warn.smallSet\": \"Mae un neu fwy o setiau o dan {min} clic; ystyriwch fodd talgrynnu neu darged gwahanol.\",\n        \"warn.largeSet\": \"Mae un neu fwy o setiau’n fwy na {max} clic; ni ddylai hyn ddigwydd gyda’r cyfyngiadau hyn.\",\n        \"warn.partitionFail\": \"Methu dod o hyd i raniad sy’n bodloni’r amodau; yn defnyddio un set.\",\n    },\n    \"bn-BD\": {\n        \"err.mgPerDose\": \"mgPerDose অবশ্যই > 0 হতে হবে\",\n        \"err.clicksPerDose\": \"clicksPerDose অবশ্যই > 0 হতে হবে\",\n        \"err.volumePerDose\": \"volumePerDoseMl অবশ্যই > 0 হতে হবে\",\n        \"err.desiredMg\": \"desiredMg অবশ্যই ≥ 0 হতে হবে\",\n        \"err.minMax\": \"ক্লিকের ন্যূনতম/সর্বোচ্চ সীমা অকার্যকর\",\n        \"warn.roundedToZero\": \"০ ক্লিকে রাউন্ড করা হয়েছে।\",\n        \"warn.deltaMg\": \"প্রয়োগিত ডোজ ({delivered}) লক্ষ্য ডোজ ({requested}) থেকে {delta} ভিন্ন। রাউন্ডিং মোড পরিবর্তনের কথা ভাবুন।\",\n        \"warn.totalBelowMin\": \"মোট ক্লিক ({total}) প্রস্তাবিত ন্যূনতম {min}‑এর নিচে। খুব ছোট সেট অনির্ভরযোগ্য হতে পারে।\",\n        \"warn.smallSet\": \"এক বা একাধিক সেট {min} ক্লিকের কম; ভিন্ন রাউন্ডিং বা লক্ষ্য বিবেচনা করুন।\",\n        \"warn.largeSet\": \"এক বা একাধিক সেট {max} ক্লিক অতিক্রম করেছে; এই সীমাবদ্ধতায় এটি হওয়া উচিত নয়।\",\n        \"warn.partitionFail\": \"শর্ত পূরণ করে এমন ভাগ পাওয়া যায়নি; একক সেট ব্যবহার করা হবে।\",\n    },\n    \"tr-TR\": {\n        \"err.mgPerDose\": \"mgPerDose > 0 olmalıdır\",\n        \"err.clicksPerDose\": \"clicksPerDose > 0 olmalıdır\",\n        \"err.volumePerDose\": \"volumePerDoseMl > 0 olmalıdır\",\n        \"err.desiredMg\": \"desiredMg ≥ 0 olmalıdır\",\n        \"err.minMax\": \"Geçersiz min/maks tıklama aralığı\",\n        \"warn.roundedToZero\": \"0 tıklamaya yuvarlandı.\",\n        \"warn.deltaMg\": \"Uygulanan doz ({delivered}), hedef dozdan ({requested}) {delta} kadar farklı. Yuvarlama modunu değiştirmeyi düşünün.\",\n        \"warn.totalBelowMin\": \"Toplam tıklama ({total}), önerilen asgari {min} değerinin altında. Çok küçük setler güvenilir olmayabilir.\",\n        \"warn.smallSet\": \"Bir veya daha fazla set {min} tıklamanın altında; farklı yuvarlama modu veya hedef deneyin.\",\n        \"warn.largeSet\": \"Bir veya daha fazla set {max} tıklamayı aşıyor; bu kısıtlarla olmamalı.\",\n        \"warn.partitionFail\": \"Kısıtları sağlayan bir bölme bulunamadı; tek set kullanılacak.\",\n    },\n    \"zh-Hans\": {\n        \"err.mgPerDose\": \"mgPerDose 必须大于 0\",\n        \"err.clicksPerDose\": \"clicksPerDose 必须大于 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl 必须大于 0\",\n        \"err.desiredMg\": \"desiredMg 必须大于或等于 0\",\n        \"err.minMax\": \"点击次数最小/最大范围无效\",\n        \"warn.roundedToZero\": \"已四舍五入为 0 次点击。\",\n        \"warn.deltaMg\": \"实际剂量（{delivered}）与目标（{requested}）相差 {delta}。可考虑调整取整方式。\",\n        \"warn.totalBelowMin\": \"总点击次数（{total}）低于建议的最小值 {min}。过小的组合可能不可靠。\",\n        \"warn.smallSet\": \"一个或多个组少于 {min} 次点击；可考虑其他取整方式或目标。\",\n        \"warn.largeSet\": \"一个或多个组超过 {max} 次点击；按当前限制不应出现。\",\n        \"warn.partitionFail\": \"未能找到满足约束的分组；将使用单一组合。\",\n    },\n    \"uk-UA\": {\n        \"err.mgPerDose\": \"mgPerDose має бути > 0\",\n        \"err.clicksPerDose\": \"clicksPerDose має бути > 0\",\n        \"err.volumePerDose\": \"volumePerDoseMl має бути > 0\",\n        \"err.desiredMg\": \"desiredMg має бути ≥ 0\",\n        \"err.minMax\": \"Некоректний мінімальний/максимальний діапазон кліків\",\n        \"warn.roundedToZero\": \"Округлено до 0 кліків.\",\n        \"warn.deltaMg\": \"Фактична доза ({delivered}) відрізняється від цільової ({requested}) на {delta}. Розгляньте зміну режиму округлення.\",\n        \"warn.totalBelowMin\": \"Загальна кількість кліків ({total}) нижча за рекомендований мінімум {min}. Дуже малі набори можуть бути ненадійними.\",\n        \"warn.smallSet\": \"Один або кілька наборів менше ніж {min} кліків; спробуйте інший режим округлення або іншу ціль.\",\n        \"warn.largeSet\": \"Один або кілька наборів перевищують {max} кліків; цього не має бути за цих обмежень.\",\n        \"warn.partitionFail\": \"Не вдалося знайти коректний поділ; буде використано один набір.\",\n    },\n};\n","import \"./styles.css\";\nimport { planClicks, makeI18n } from \"./lib/clickPlanner\";\nimport { LOCALES, DEFAULT_LOCALE, LOCALE_LABELS, HTML_LANG, UI_STRINGS, MESSAGES, matchNavigatorLocale, } from \"./i18n\";\n/* 1) Constants */\nconst CLICKS_PER_DOSE = 60;\nconst VOLUME_PER_DOSE_ML = 0.6;\nconst QUICK_MG = [2.5, 5, 7.5, 10, 12.5, 15];\nconst DEFAULT_DECIMALS = 6;\n/* 2) Small utilities */\nfunction requireEl(id) {\n    const el = document.getElementById(id);\n    if (!el)\n        throw new Error(`Required element #${id} not found`);\n    return el;\n}\nfunction roundTo(n, decimals = DEFAULT_DECIMALS) {\n    const p = Math.pow(10, decimals);\n    return Math.round(n * p) / p;\n}\nfunction toFixedTrim(n, decimals = DEFAULT_DECIMALS) {\n    return roundTo(n, decimals)\n        .toFixed(decimals)\n        .replace(/\\.?0+$/, \"\");\n}\nfunction mgPerClick(penMg) {\n    return penMg / CLICKS_PER_DOSE;\n}\n/* 3) DOM refs */\nconst formEl = requireEl(\"planner-form\");\nconst penSelect = requireEl(\"pen-mg\");\nconst desiredInput = requireEl(\"desired-mg-input\");\nconst quickPicksEl = requireEl(\"quick-picks\");\nconst stepHintEl = requireEl(\"step-hint\");\nconst resultEl = requireEl(\"result\");\nconst titleEl = requireEl(\"t-title\");\nconst haveLabelEl = requireEl(\"t-have\");\nconst wantLabelEl = requireEl(\"t-want\");\nconst disclaimerEl = requireEl(\"t-disclaimer\");\nconst penHintEl = requireEl(\"t-pen-hint\");\nconst localeSelect = requireEl(\"locale\");\nconst copyright = document.getElementById(\"copyright-year\") ?? null;\nfunction readUrlState() {\n    const qs = new URLSearchParams(location.search);\n    const loc = qs.get(\"lang\");\n    const pen = qs.get(\"pen\");\n    const dose = qs.get(\"dose\");\n    const penNum = pen != null ? Number(pen) : undefined;\n    const doseNum = dose != null ? Number(dose) : undefined;\n    return {\n        locale: loc && LOCALES.includes(loc)\n            ? loc\n            : undefined,\n        pen: penNum && Number.isFinite(penNum) ? penNum : undefined,\n        dose: doseNum && Number.isFinite(doseNum) ? doseNum : undefined,\n    };\n}\nfunction writeUrlState(state) {\n    const url = new URL(location.href);\n    url.searchParams.set(\"lang\", state.locale);\n    url.searchParams.set(\"pen\", toFixedTrim(state.pen, 3));\n    if (state.dose && state.dose > 0) {\n        url.searchParams.set(\"dose\", toFixedTrim(state.dose, DEFAULT_DECIMALS));\n    }\n    else {\n        url.searchParams.delete(\"dose\");\n    }\n    history.replaceState(null, \"\", url.toString());\n    localStorage.setItem(\"clickdose.locale\", state.locale);\n}\n/* 5) Locale picker builder */\nfunction buildLocaleOptions(current) {\n    // Suggested = English (UK) + navigator match (if different)\n    const suggested = new Map();\n    suggested.set(\"en-GB\", LOCALE_LABELS[\"en-GB\"]);\n    const nav = matchNavigatorLocale();\n    if (nav && nav !== \"en-GB\")\n        suggested.set(nav, LOCALE_LABELS[nav]);\n    // All locales sorted by self-name\n    const all = Object.keys(LOCALE_LABELS).sort((a, b) => LOCALE_LABELS[a].localeCompare(LOCALE_LABELS[b], undefined, {\n        sensitivity: \"base\",\n    }));\n    localeSelect.innerHTML = \"\";\n    if (suggested.size > 0) {\n        const og = document.createElement(\"optgroup\");\n        og.label = \"Suggested\";\n        suggested.forEach((label, loc) => og.append(new Option(label, loc, false, loc === current)));\n        localeSelect.append(og);\n    }\n    const ogAll = document.createElement(\"optgroup\");\n    ogAll.label = \"All languages\";\n    for (const loc of all)\n        ogAll.append(new Option(LOCALE_LABELS[loc], loc, false, loc === current));\n    localeSelect.append(ogAll);\n    localeSelect.value = current;\n}\n/* 6) Global UI state */\nconst UI = {\n    locale: DEFAULT_LOCALE,\n    ui: UI_STRINGS[DEFAULT_LOCALE],\n};\nlet I18N = makeI18n(UI.locale, MESSAGES[UI.locale], { ml: \"ml\" });\n/* 7) One-time UI builders */\nfunction buildQuickPicks() {\n    quickPicksEl.innerHTML = \"\";\n    quickPicksEl.setAttribute(\"aria-label\", UI.ui.quickPicksAria);\n    for (const v of QUICK_MG) {\n        const btn = document.createElement(\"button\");\n        btn.type = \"button\";\n        btn.dataset.mg = String(v);\n        btn.className =\n            \"inline-flex items-center rounded-md bg-zinc-100 px-2 py-1 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700 dark:hover:bg-zinc-700\";\n        btn.textContent = I18N.format.mg(v);\n        btn.addEventListener(\"click\", () => {\n            desiredInput.value = String(v);\n            render();\n            writeUrlState({\n                locale: UI.locale,\n                pen: Number(penSelect.value),\n                dose: Number(v),\n            });\n        });\n        quickPicksEl.appendChild(btn);\n    }\n}\n/* 8) Rendering helpers */\nfunction clear(el) {\n    while (el.firstChild)\n        el.removeChild(el.firstChild);\n}\nfunction el(tag, className, text) {\n    const node = document.createElement(tag);\n    if (className)\n        node.className = className;\n    if (text != null)\n        node.textContent = text;\n    return node;\n}\nfunction chip(text) {\n    return el(\"span\", \"inline-flex items-center rounded-md bg-zinc-100 px-2 py-0.5 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700\", text);\n}\nfunction setDesiredStep() {\n    const step = mgPerClick(Number(penSelect.value)) || 0.01;\n    desiredInput.step = step.toString();\n    stepHintEl.textContent = UI.ui.stepHint(I18N.format.mg(step));\n}\n/* 9) Apply locale */\nfunction applyLocale(loc) {\n    UI.locale = loc;\n    I18N = makeI18n(loc, MESSAGES[loc], { ml: \"ml\" });\n    UI.ui = UI_STRINGS[loc];\n    document.documentElement.lang = HTML_LANG[loc];\n    // Static labels\n    titleEl.textContent = UI.ui.title;\n    haveLabelEl.textContent = UI.ui.haveLabel;\n    wantLabelEl.textContent = UI.ui.wantLabel;\n    disclaimerEl.textContent = UI.ui.disclaimer;\n    // Hint with localized example \"60 clicks\"\n    penHintEl.textContent = UI.ui.penHint(I18N.format.integer(CLICKS_PER_DOSE));\n    // Input mg suffix and placeholder\n    const mgSuffixEl = desiredInput.parentElement?.querySelector(\"span\");\n    if (mgSuffixEl)\n        mgSuffixEl.textContent = UI.ui.mgSuffix;\n    desiredInput.placeholder = UI.ui.desiredPlaceholder(I18N.format.mg(5));\n    // Rebuild quick picks (localized numbers) and accessibility labels\n    buildQuickPicks();\n    penSelect.setAttribute(\"aria-label\", UI.ui.ariaPen);\n    desiredInput.setAttribute(\"aria-label\", UI.ui.ariaDesired);\n    // Title and picker value\n    document.title = UI.ui.title;\n    localeSelect.value = loc;\n    // Re-render with the same pen/dose currently in the controls\n    setDesiredStep();\n    render();\n}\n/* 10) Main render */\nfunction render() {\n    const penMg = Number(penSelect.value);\n    const desired = desiredInput.valueAsNumber;\n    setDesiredStep();\n    clear(resultEl);\n    if (!Number.isFinite(desired) || desired <= 0) {\n        resultEl.append(el(\"div\", \"text-sm text-zinc-500\", UI.ui.enterDosePrompt));\n        return;\n    }\n    const plan = planClicks({\n        mgPerDose: penMg,\n        desiredMg: desired,\n        clicksPerDose: CLICKS_PER_DOSE,\n        volumePerDoseMl: VOLUME_PER_DOSE_ML,\n        i18n: I18N,\n    });\n    const headerRow = el(\"div\", \"flex items-baseline gap-2 mb-3\");\n    headerRow.append(el(\"h2\", \"text-lg font-semibold\", UI.ui.resultHeading), el(\"span\", \"text-xs text-zinc-500\", UI.ui.summary(I18N.format.mg(penMg), I18N.format.mg(desired))));\n    resultEl.append(headerRow);\n    const grid = el(\"div\", \"grid grid-cols-1 gap-2 sm:grid-cols-2\");\n    // Click sets\n    const setsCard = el(\"div\", \"rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50\");\n    setsCard.append(el(\"div\", \"text-sm text-zinc-600 dark:text-zinc-300\", UI.ui.clickSets));\n    const setsLine = el(\"div\", \"mt-1 text-base font-medium\");\n    plan.clickSets.forEach((n, i) => {\n        if (i > 0)\n            setsLine.append(el(\"span\", \"mx-1 text-zinc-400\", \"+\"));\n        setsLine.append(chip(String(n)));\n    });\n    setsCard.append(setsLine);\n    setsCard.append(el(\"div\", \"text-xs text-zinc-500\", UI.ui.totalClicksLine(I18N.format.integer(plan.totalClicks))));\n    // Volume\n    const volCard = el(\"div\", \"rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50\");\n    volCard.append(el(\"div\", \"text-sm text-zinc-600 dark:text-zinc-300\", UI.ui.totalVolume));\n    volCard.append(el(\"div\", \"mt-1 text-base font-medium\", I18N.format.ml(plan.totalVolumeMl)));\n    volCard.append(el(\"div\", \"text-xs text-zinc-500\", UI.ui.perClickAndDose(I18N.format.ml(plan.perClick.ml), I18N.format.mg(plan.perClick.mg))));\n    grid.append(setsCard, volCard);\n    resultEl.append(grid);\n    // Delivered vs requested\n    resultEl.append(el(\"div\", \"mt-3 text-sm\", `${UI.ui.deliveredDose}: ${I18N.format.mg(plan.deliveredMg)} (${UI.ui.requested}: ${I18N.format.mg(plan.requestedMg)})`));\n    // Warnings\n    if (plan.warnings.length) {\n        const ul = el(\"ul\", \"mt-2 list-disc pl-5 text-sm text-amber-700 dark:text-amber-400\");\n        plan.warnings.forEach((w) => ul.append(el(\"li\", undefined, w)));\n        resultEl.append(ul);\n    }\n}\n/* 11) Events */\nformEl.addEventListener(\"change\", (e) => {\n    const t = e.target;\n    if (!t)\n        return;\n    if (t.id === \"pen-mg\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n    if (t.id === \"desired-mg-input\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n});\nformEl.addEventListener(\"input\", (e) => {\n    const t = e.target;\n    if (t && t.id === \"desired-mg-input\") {\n        render();\n        writeUrlState({\n            locale: UI.locale,\n            pen: Number(penSelect.value),\n            dose: desiredInput.valueAsNumber,\n        });\n    }\n});\n// Arrow keys: step by exact click (no float drift)\ndesiredInput.addEventListener(\"keydown\", (e) => {\n    if (e.key !== \"ArrowUp\" && e.key !== \"ArrowDown\")\n        return;\n    const step = mgPerClick(Number(penSelect.value));\n    if (!(step > 0))\n        return;\n    e.preventDefault();\n    const dir = e.key === \"ArrowUp\" ? 1 : -1;\n    const current = Number.isFinite(desiredInput.valueAsNumber)\n        ? desiredInput.valueAsNumber\n        : 0;\n    let clicks = Math.round(current / step);\n    clicks += dir;\n    const next = clicks * step;\n    desiredInput.value = toFixedTrim(next, DEFAULT_DECIMALS);\n    render();\n    writeUrlState({\n        locale: UI.locale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n});\nlocaleSelect.addEventListener(\"change\", () => {\n    const loc = localeSelect.value;\n    if (!(loc in LOCALE_LABELS))\n        return;\n    applyLocale(loc);\n    writeUrlState({\n        locale: UI.locale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n});\n/* 12) Boot */\nif (copyright) {\n    copyright.textContent = String(new Date().getFullYear());\n}\n// 1) Read incoming URL ONCE\nconst incoming = readUrlState();\n// 2) Decide initial locale (URL -> stored -> navigator -> default)\nconst initialLocale = incoming.locale ??\n    localStorage.getItem(\"clickdose.locale\") ??\n    matchNavigatorLocale() ??\n    DEFAULT_LOCALE;\n// 3) Build the language picker and apply locale (does NOT write URL)\nbuildLocaleOptions(initialLocale);\napplyLocale(initialLocale);\n// 4) Apply pen and dose from URL to the controls (then write URL once)\n(() => {\n    // Pen must be one of the known strengths\n    const allowed = new Set([2.5, 5, 7.5, 10, 12.5, 15]);\n    if (incoming.pen && allowed.has(incoming.pen)) {\n        penSelect.value = String(incoming.pen);\n    }\n    // Dose: any positive number\n    if (incoming.dose && incoming.dose > 0) {\n        desiredInput.value = toFixedTrim(incoming.dose, DEFAULT_DECIMALS);\n    }\n    else {\n        desiredInput.value = \"5\";\n    }\n    // Now that controls reflect the final initial state, write it to the URL\n    writeUrlState({\n        locale: initialLocale,\n        pen: Number(penSelect.value),\n        dose: desiredInput.valueAsNumber,\n    });\n    // Render once with the just-applied state\n    render();\n})();\n"],"names":["defaultMessages","makeI18n","locale","overrides","units","numberFormat","msgs","u","mg","ml","nfMg","Intl","NumberFormat","maximumFractionDigits","nfMl","nfInt","integer","t","key","params","template","replace","_","k","undefined","String","interpolate","format","n","partitionWithK","total","K","min","max","target","scoreValue","v","score","Math","pow","dp","Array","from","length","fill","Number","POSITIVE_INFINITY","back","i","minSum","maxSum","s","sPrevMin","sPrevMax","vMin","vMax","prevScore","cand","sets","LOCALES","DEFAULT_LOCALE","LOCALE_LABELS","cy","HTML_LANG","matchNavigatorLocale","navigator","languages","language","filter","Boolean","code","lc","toLowerCase","startsWith","UI_STRINGS","title","haveLabel","wantLabel","resultHeading","clickSets","totalVolume","deliveredDose","requested","disclaimer","penWord","ariaPen","ariaDesired","penHint","summary","p","perClickAndDose","totalClicksLine","stepHint","enterDosePrompt","quickPicksAria","mgSuffix","desiredPlaceholder","ex","MESSAGES","QUICK_MG","requireEl","id","el","document","getElementById","Error","toFixedTrim","decimals","round","roundTo","toFixed","mgPerClick","penMg","formEl","penSelect","desiredInput","quickPicksEl","stepHintEl","resultEl","titleEl","haveLabelEl","wantLabelEl","disclaimerEl","penHintEl","localeSelect","copyright","writeUrlState","state","url","URL","location","href","searchParams","set","pen","dose","delete","history","replaceState","toString","localStorage","setItem","UI","ui","I18N","tag","className","text","node","createElement","textContent","setDesiredStep","step","value","applyLocale","loc","documentElement","lang","mgSuffixEl","parentElement","querySelector","placeholder","innerHTML","setAttribute","btn","type","dataset","addEventListener","render","appendChild","buildQuickPicks","desired","valueAsNumber","firstChild","removeChild","clear","isFinite","append","plan","input","mgPerDose","desiredMg","clicksPerDose","volumePerDoseMl","maxClicksPerSet","minClicksPerSet","roundingMode","i18n","warnings","mlPerClick","totalClicks","x","mode","floor","ceil","roundByMode","totalVolumeMl","requestedMg","deliveredMg","perClick","deltaMg","abs","push","delivered","delta","opts","altK","partitionClicksNicely","some","c","planClicks","headerRow","grid","setsCard","setsLine","forEach","volCard","ul","w","e","preventDefault","dir","current","clicks","next","Date","getFullYear","incoming","qs","URLSearchParams","search","get","penNum","doseNum","includes","readUrlState","initialLocale","getItem","suggested","Map","nav","all","Object","keys","sort","a","b","localeCompare","sensitivity","size","og","label","Option","ogAll","buildLocaleOptions","allowed","Set","has"],"sourceRoot":""}