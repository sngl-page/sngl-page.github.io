"use strict";(self.webpackChunkpen_click_dose_calculator=self.webpackChunkpen_click_dose_calculator||[]).push([[792],{643:()=>{const e={"err.mgPerDose":"mgPerDose must be > 0","err.clicksPerDose":"clicksPerDose must be > 0","err.volumePerDose":"volumePerDoseMl must be > 0","err.desiredMg":"desiredMg must be >= 0","err.minMax":"Invalid min/max clicks per set","warn.roundedToZero":"Rounded to 0 clicks.","warn.deltaMg":"Delivered dose ({delivered}) differs from requested ({requested}) by {delta}. Consider adjusting the rounding mode.","warn.totalBelowMin":"Total clicks ({total}) is below the recommended minimum of {min}. Very small sets can be unreliable.","warn.smallSet":"One or more sets are below {min} clicks; consider a different rounding mode or target.","warn.largeSet":"One or more sets exceed {max} clicks; this should not occur with the constraints.","warn.partitionFail":"Could not find a partition meeting constraints; returning a single set."};function t(t="en-GB",r,n,i){const s={...e,...r},o={mg:"mg",ml:"ml",...n},l=new Intl.NumberFormat(t,{maximumFractionDigits:3,...i?.mg??{}}),a=new Intl.NumberFormat(t,{maximumFractionDigits:3,...i?.ml??{}}),d=new Intl.NumberFormat(t,{maximumFractionDigits:0,...i?.integer??{}});return{locale:t,t:(e,t)=>function(e,t){return t?e.replace(/\{(\w+)\}/g,(e,r)=>void 0===t[r]||null===t[r]?"":String(t[r])):e}(s[e]??e,t),format:{mg:e=>`${l.format(e)} ${o.mg}`,ml:e=>`${a.format(e)} ${o.ml}`,integer:e=>d.format(e)}}}function r(e,t,r,n){const i=e/t;function s(e){let t=.05*Math.pow(e-i,2);return e%10==0?t-=2:t+=e%5==0?1:3,e===r&&(t+=4),t}const o=Array.from({length:t+1},()=>Array(e+1).fill(Number.POSITIVE_INFINITY)),l=Array.from({length:t+1},()=>Array(e+1).fill(-1));o[0][0]=0;for(let i=1;i<=t;i++){const t=i*r,a=Math.min(e,i*n);for(let d=t;d<=a;d++){const t=(i-1)*r,a=Math.min(e,(i-1)*n),c=Math.max(r,d-a),m=Math.min(n,d-t);for(let e=c;e<=m;e++){const t=o[i-1][d-e];if(t===Number.POSITIVE_INFINITY)continue;const r=t+s(e);r<o[i][d]&&(o[i][d]=r,l[i][d]=e)}}}if(o[t][e]===Number.POSITIVE_INFINITY)return[];const a=new Array(t);let d=e;for(let e=t;e>=1;e--){const t=l[e][d];if(t<0)return[];a[e-1]=t,d-=t}return a}const n="en-GB",i=[2.5,5,7.5,10,12.5,15],s={"en-GB":{title:"Pen Click Dose Calculator",haveLabel:"I have a",wantLabel:"I want a dose of",resultHeading:"Result",clickSets:"Click sets",totalVolume:"Total volume",deliveredDose:"Delivered dose",requested:"requested",disclaimer:"This tool performs arithmetic planning only. Always follow your device’s instructions and consult a clinician or pharmacist for dosing decisions.",penWord:"pen",ariaPen:"Pen strength (mg per full dose)",ariaDesired:"Desired dose (mg)",penHint:e=>`This is the labelled dose per full dial (e.g. ${e} clicks).`,summary:(e,t)=>`(Pen: ${e}; Target: ${t})`,perClickAndDose:(e,t)=>`Per click: ${e}; Per click dose: ${t}`,totalClicksLine:e=>`Total: ${e} clicks`,stepHint:e=>`Step: ${e} per click`,enterDosePrompt:"Enter a dose to see the plan.",quickPicksAria:"Quick picks",mgSuffix:"mg",desiredPlaceholder:e=>`e.g. ${e}`},"fr-FR":{title:"Calculateur de dose par clic",haveLabel:"J’ai un",wantLabel:"Je veux une dose de",resultHeading:"Résultat",clickSets:"Ensembles de clics",totalVolume:"Volume total",deliveredDose:"Dose délivrée",requested:"demandée",disclaimer:"Cet outil ne fournit qu’une aide de calcul. Suivez toujours les instructions de votre appareil et demandez conseil à un professionnel de santé.",penWord:"stylo",ariaPen:"Force du stylo (mg par dose complète)",ariaDesired:"Dose souhaitée (mg)",penHint:e=>`Ceci est la dose indiquée pour un tour complet (p. ex. ${e} clics).`,summary:(e,t)=>`(Stylo : ${e} ; Objectif : ${t})`,perClickAndDose:(e,t)=>`Par clic : ${e} ; Dose par clic : ${t}`,totalClicksLine:e=>`Total : ${e} clics`,stepHint:e=>`Pas : ${e} par clic`,enterDosePrompt:"Saisissez une dose pour afficher le plan.",quickPicksAria:"Raccourcis",mgSuffix:"mg",desiredPlaceholder:e=>`p. ex. ${e}`},"de-DE":{title:"Klick‑Dosis‑Rechner",haveLabel:"Ich habe einen",wantLabel:"Ich möchte eine Dosis von",resultHeading:"Ergebnis",clickSets:"Klick‑Sets",totalVolume:"Gesamtvolumen",deliveredDose:"Abgegebene Dosis",requested:"gewünscht",disclaimer:"Dieses Werkzeug liefert nur eine rechnerische Planung. Befolgen Sie stets die Anweisungen Ihres Geräts und lassen Sie sich medizinisch beraten.",penWord:"Pen",ariaPen:"Pen‑Stärke (mg pro Volldosis)",ariaDesired:"Gewünschte Dosis (mg)",penHint:e=>`Dies ist die angegebene Dosis pro voller Drehung (z. B. ${e} Klicks).`,summary:(e,t)=>`(Pen: ${e}; Ziel: ${t})`,perClickAndDose:(e,t)=>`Pro Klick: ${e}; Dosis pro Klick: ${t}`,totalClicksLine:e=>`Summe: ${e} Klicks`,stepHint:e=>`Schrittweite: ${e} pro Klick`,enterDosePrompt:"Geben Sie eine Dosis ein, um den Plan zu sehen.",quickPicksAria:"Schnellauswahl",mgSuffix:"mg",desiredPlaceholder:e=>`z. B. ${e}`}},o={"en-GB":{},"fr-FR":{"err.mgPerDose":"mgPerDose doit être > 0","err.clicksPerDose":"clicksPerDose doit être > 0","err.volumePerDose":"volumePerDoseMl doit être > 0","err.desiredMg":"desiredMg doit être ≥ 0","err.minMax":"Plage min/max de clics invalide","warn.roundedToZero":"Arrondi à 0 clic.","warn.deltaMg":"La dose délivrée ({delivered}) diffère de la dose demandée ({requested}) de {delta}. Envisagez d'ajuster le mode d'arrondi.","warn.totalBelowMin":"Le total de clics ({total}) est inférieur au minimum recommandé de {min}. Les très petits ensembles peuvent être peu fiables.","warn.smallSet":"Un ou plusieurs ensembles sont inférieurs à {min} clics; envisagez un autre mode d'arrondi ou un autre objectif.","warn.largeSet":"Un ou plusieurs ensembles dépassent {max} clics; cela ne devrait pas se produire avec ces contraintes.","warn.partitionFail":"Impossible de trouver une partition respectant les contraintes; un seul ensemble sera utilisé."},"de-DE":{"err.mgPerDose":"mgPerDose muss > 0 sein","err.clicksPerDose":"clicksPerDose muss > 0 sein","err.volumePerDose":"volumePerDoseMl muss > 0 sein","err.desiredMg":"desiredMg muss ≥ 0 sein","err.minMax":"Ungültiger Minimal-/Maximalbereich für Klicks","warn.roundedToZero":"Auf 0 Klicks gerundet.","warn.deltaMg":"Abgegebene Dosis ({delivered}) weicht von der gewünschten ({requested}) um {delta} ab. Passen Sie ggf. den Rundungsmodus an.","warn.totalBelowMin":"Gesamtanzahl der Klicks ({total}) liegt unter dem empfohlenen Minimum von {min}. Sehr kleine Sätze können unzuverlässig sein.","warn.smallSet":"Ein oder mehrere Sätze liegen unter {min} Klicks; erwägen Sie einen anderen Rundungsmodus oder Zielwert.","warn.largeSet":"Ein oder mehrere Sätze überschreiten {max} Klicks; dies sollte mit den Vorgaben nicht vorkommen.","warn.partitionFail":"Es konnte keine gültige Aufteilung gefunden werden; es wird ein einzelner Satz verwendet."}};function l(e){const t=document.getElementById(e);if(!t)throw new Error(`Required element #${e} not found`);return t}const a=l("planner-form"),d=l("pen-mg"),c=l("desired-mg-input"),m=l("quick-picks"),u=l("step-hint"),g=l("result"),p=l("t-title"),f=l("t-have"),k=l("t-want"),h=l("t-disclaimer"),b=l("t-pen-hint"),w=l("locale-switcher"),v=document.getElementById("copyright-year");v&&(v.textContent=String((new Date).getFullYear()));let x=n,D=t(x,o[x],{ml:"ml"}),P=s[x];const M={"en-GB":"en","fr-FR":"fr","de-DE":"de"};function S(e){return D.format.mg(e)}function C(){const e=Number(d.value)/60||.01;c.step=e.toString(),u.textContent=P.stepHint(S(e))}function z(e){x=e,D=t(e,o[e],{ml:"ml"}),P=s[e],document.documentElement.lang=M[e],p.textContent=P.title,f.textContent=P.haveLabel,k.textContent=P.wantLabel,h.textContent=P.disclaimer;const r=D.format.integer(60);b.textContent=P.penHint(r);const n=c.parentElement?.querySelector("span");n&&(n.textContent=P.mgSuffix),c.placeholder=P.desiredPlaceholder(D.format.mg(5)),function(){m.innerHTML="",m.setAttribute("aria-label",P.quickPicksAria);for(const e of i){const t=document.createElement("button");t.type="button",t.dataset.mg=String(e),t.className="inline-flex items-center rounded-md bg-zinc-100 px-2 py-1 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700 dark:hover:bg-zinc-700",t.textContent=S(e),t.addEventListener("click",()=>{c.value=String(e),E()}),m.appendChild(t)}}(),C(),d.setAttribute("aria-label",P.ariaPen),c.setAttribute("aria-label",P.ariaDesired),document.title=P.title,E()}function $(e,t,r){const n=document.createElement(e);return t&&(n.className=t),null!=r&&(n.textContent=r),n}function E(){const e=Number(d.value),n=c.valueAsNumber;if(C(),function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(g),!Number.isFinite(n)||n<=0)return void g.append($("div","text-sm text-zinc-500",P.enterDosePrompt));const i=function(e){const{mgPerDose:n,desiredMg:i,clicksPerDose:s=60,volumePerDoseMl:o=.6,maxClicksPerSet:l=60,minClicksPerSet:a=10,roundingMode:d="nearest",i18n:c=t()}=e,m=[];if(n<=0)throw new Error(c.t("err.mgPerDose"));if(s<=0)throw new Error(c.t("err.clicksPerDose"));if(o<=0)throw new Error(c.t("err.volumePerDose"));if(i<0)throw new Error(c.t("err.desiredMg"));if(a<=0||l<a)throw new Error(c.t("err.minMax"));const u=n/s,g=o/s;let p=function(e,t){switch(t){case"down":return Math.floor(e);case"up":return Math.ceil(e);default:return Math.round(e)}}(i/u,d);if(0===i||0===p)return{totalClicks:0,clickSets:[],totalVolumeMl:0,requestedMg:i,deliveredMg:0,perClick:{mg:u,ml:g},warnings:0===i?m:[...m,c.t("warn.roundedToZero")]};const f=p*u,k=f-i;if(Math.abs(k)>u/2&&m.push(c.t("warn.deltaMg",{delivered:c.format.mg(f),requested:c.format.mg(i),delta:c.format.mg(Math.abs(k))})),p<a)return m.push(c.t("warn.totalBelowMin",{total:c.format.integer(p),min:c.format.integer(a)})),{totalClicks:p,clickSets:[p],totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m};const h=function(e,t){const{min:n,max:i}=t,s=Math.ceil(e/i);if(s<=0)return[];if(1===s&&e>=n&&e<=i)return[e];if(e<s*n){const t=Math.max(1,Math.floor(e/n));if(t>=1&&e<=t*i&&e>=t*n)return r(e,t,n,i)}return r(e,s,n,i)}(p,{min:a,max:l});return h&&0!==h.length?(h.some(e=>e<a)&&m.push(c.t("warn.smallSet",{min:c.format.integer(a)})),h.some(e=>e>l)&&m.push(c.t("warn.largeSet",{max:c.format.integer(l)})),{totalClicks:p,clickSets:h,totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m}):(m.push(c.t("warn.partitionFail")),{totalClicks:p,clickSets:[p],totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m})}({mgPerDose:e,desiredMg:n,clicksPerDose:60,volumePerDoseMl:.6,i18n:D}),s=$("div","flex items-baseline gap-2 mb-3");s.append($("h2","text-lg font-semibold",P.resultHeading),$("span","text-xs text-zinc-500",P.summary(S(e),S(n)))),g.append(s);const o=$("div","grid grid-cols-1 gap-2 sm:grid-cols-2"),l=$("div","rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50");l.append($("div","text-sm text-zinc-600 dark:text-zinc-300",P.clickSets));const a=$("div","mt-1 text-base font-medium");i.clickSets.forEach((e,t)=>{t>0&&a.append($("span","mx-1 text-zinc-400","+")),a.append($("span","inline-flex items-center rounded-md bg-zinc-100 px-2 py-0.5 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700",String(e)))}),l.append(a),l.append($("div","text-xs text-zinc-500",P.totalClicksLine(D.format.integer(i.totalClicks))));const m=$("div","rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50");if(m.append($("div","text-sm text-zinc-600 dark:text-zinc-300",P.totalVolume)),m.append($("div","mt-1 text-base font-medium",D.format.ml(i.totalVolumeMl))),m.append($("div","text-xs text-zinc-500",P.perClickAndDose(D.format.ml(i.perClick.ml),D.format.mg(i.perClick.mg)))),o.append(l,m),g.append(o),g.append($("div","mt-3 text-sm",`${P.deliveredDose}: ${D.format.mg(i.deliveredMg)} (${P.requested}: ${D.format.mg(i.requestedMg)})`)),i.warnings.length){const e=$("ul","mt-2 list-disc pl-5 text-sm text-amber-700 dark:text-amber-400");i.warnings.forEach(t=>e.append($("li",void 0,t))),g.append(e)}}a.addEventListener("change",e=>{const t=e.target;!t||"pen-mg"!==t.id&&"desired-mg-input"!==t.id||E()}),a.addEventListener("input",e=>{const t=e.target;t&&"desired-mg-input"===t.id&&E()}),w.addEventListener("click",e=>{const t=e.target.closest("[data-locale]");if(!t)return;const r=t.dataset.locale;if(r&&r!==x){for(const e of Array.from(w.querySelectorAll("button[data-locale]"))){const t=e.dataset.locale===r;e.setAttribute("aria-pressed",t?"true":"false"),e.classList.toggle("ring-2",t),e.classList.toggle("ring-indigo-600/60",t),e.classList.toggle("border-indigo-600",t),e.classList.toggle("dark:ring-indigo-500/60",t),e.classList.toggle("dark:border-indigo-500",t)}z(r)}}),z(n),c.value="5",E()}},e=>{e(e.s=643)}]);
//# sourceMappingURL=main.6f5f8f07471d83777c7a.js.map