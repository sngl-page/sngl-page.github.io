"use strict";(self.webpackChunkpen_click_dose_calculator=self.webpackChunkpen_click_dose_calculator||[]).push([[792],{643:()=>{const e={"err.mgPerDose":"mgPerDose must be > 0","err.clicksPerDose":"clicksPerDose must be > 0","err.volumePerDose":"volumePerDoseMl must be > 0","err.desiredMg":"desiredMg must be >= 0","err.minMax":"Invalid min/max clicks per set","warn.roundedToZero":"Rounded to 0 clicks.","warn.deltaMg":"Delivered dose ({delivered}) differs from requested ({requested}) by {delta}. Consider adjusting the rounding mode.","warn.totalBelowMin":"Total clicks ({total}) is below the recommended minimum of {min}. Very small sets can be unreliable.","warn.smallSet":"One or more sets are below {min} clicks; consider a different rounding mode or target.","warn.largeSet":"One or more sets exceed {max} clicks; this should not occur with the constraints.","warn.partitionFail":"Could not find a partition meeting constraints; returning a single set."};function t(t="en-GB",r,n,i){const s={...e,...r},o={mg:"mg",ml:"ml",...n},l=new Intl.NumberFormat(t,{maximumFractionDigits:3,...i?.mg??{}}),a=new Intl.NumberFormat(t,{maximumFractionDigits:3,...i?.ml??{}}),d=new Intl.NumberFormat(t,{maximumFractionDigits:0,...i?.integer??{}});return{locale:t,t:(e,t)=>function(e,t){return t?e.replace(/\{(\w+)\}/g,(e,r)=>void 0===t[r]||null===t[r]?"":String(t[r])):e}(s[e]??e,t),format:{mg:e=>`${l.format(e)} ${o.mg}`,ml:e=>`${a.format(e)} ${o.ml}`,integer:e=>d.format(e)}}}function r(e,t,r,n){const i=e/t;function s(e){let t=.05*Math.pow(e-i,2);return e%10==0?t-=2:t+=e%5==0?1:3,e===r&&(t+=4),t}const o=Array.from({length:t+1},()=>Array(e+1).fill(Number.POSITIVE_INFINITY)),l=Array.from({length:t+1},()=>Array(e+1).fill(-1));o[0][0]=0;for(let i=1;i<=t;i++){const t=i*r,a=Math.min(e,i*n);for(let d=t;d<=a;d++){const t=(i-1)*r,a=Math.min(e,(i-1)*n),c=Math.max(r,d-a),m=Math.min(n,d-t);for(let e=c;e<=m;e++){const t=o[i-1][d-e];if(t===Number.POSITIVE_INFINITY)continue;const r=t+s(e);r<o[i][d]&&(o[i][d]=r,l[i][d]=e)}}}if(o[t][e]===Number.POSITIVE_INFINITY)return[];const a=new Array(t);let d=e;for(let e=t;e>=1;e--){const t=l[e][d];if(t<0)return[];a[e-1]=t,d-=t}return a}const n="en-GB",i={"en-GB":{title:"Pen Click Dose Calculator",haveLabel:"I have a",wantLabel:"I want a dose of",resultHeading:"Result",summary:(e,t)=>`(Pen: ${e}; Target: ${t})`,clickSets:"Click sets",totalVolume:"Total volume",perClick:"Per click",perClickDose:"Per click dose",deliveredDose:"Delivered dose",requested:"requested",total:"Total",clicks:"clicks",disclaimer:"This tool performs arithmetic planning only. Always follow your device’s instructions and consult a clinician or pharmacist for dosing decisions.",penWord:"pen",ariaPen:"Pen strength (mg per full dose)",ariaDesired:"Desired dose (mg)",penHint:e=>`This is the labelled dose per full dial (e.g. ${e}).`},"fr-FR":{title:"Calculateur de dose par clic",haveLabel:"J’ai un",wantLabel:"Je veux une dose de",resultHeading:"Résultat",summary:(e,t)=>`(Stylo : ${e} ; Objectif : ${t})`,clickSets:"Ensembles de clics",totalVolume:"Volume total",perClick:"Par clic",perClickDose:"Dose par clic",deliveredDose:"Dose délivrée",requested:"demandée",total:"Total",clicks:"clics",disclaimer:"Cet outil ne fournit qu’une aide de calcul. Suivez toujours les instructions de votre appareil et demandez conseil à un professionnel de santé.",penWord:"stylo",ariaPen:"Force du stylo (mg par dose complète)",ariaDesired:"Dose souhaitée (mg)",penHint:e=>`Ceci est la dose indiquée pour un tour complet (p. ex. ${e}).`},"de-DE":{title:"Klick‑Dosis‑Rechner",haveLabel:"Ich habe einen",wantLabel:"Ich möchte eine Dosis von",resultHeading:"Ergebnis",summary:(e,t)=>`(Pen: ${e}; Ziel: ${t})`,clickSets:"Klick‑Sets",totalVolume:"Gesamtvolumen",perClick:"Pro Klick",perClickDose:"Dosis pro Klick",deliveredDose:"Abgegebene Dosis",requested:"gewünscht",total:"Summe",clicks:"Klicks",disclaimer:"Dieses Werkzeug liefert nur eine rechnerische Planung. Befolgen Sie stets die Anweisungen Ihres Geräts und lassen Sie sich medizinisch beraten.",penWord:"Pen",ariaPen:"Pen‑Stärke (mg pro Volldosis)",ariaDesired:"Gewünschte Dosis (mg)",penHint:e=>`Dies ist die angegebene Dosis pro voller Drehung (z. B. ${e}).`}},s={"en-GB":{},"fr-FR":{"err.mgPerDose":"mgPerDose doit être > 0","err.clicksPerDose":"clicksPerDose doit être > 0","err.volumePerDose":"volumePerDoseMl doit être > 0","err.desiredMg":"desiredMg doit être ≥ 0","err.minMax":"Plage min/max de clics invalide","warn.roundedToZero":"Arrondi à 0 clic.","warn.deltaMg":"La dose délivrée ({delivered}) diffère de la dose demandée ({requested}) de {delta}. Envisagez d'ajuster le mode d'arrondi.","warn.totalBelowMin":"Le total de clics ({total}) est inférieur au minimum recommandé de {min}. Les très petits ensembles peuvent être peu fiables.","warn.smallSet":"Un ou plusieurs ensembles sont inférieurs à {min} clics; envisagez un autre mode d'arrondi ou un autre objectif.","warn.largeSet":"Un ou plusieurs ensembles dépassent {max} clics; cela ne devrait pas se produire avec ces contraintes.","warn.partitionFail":"Impossible de trouver une partition respectant les contraintes; un seul ensemble sera utilisé."},"de-DE":{"err.mgPerDose":"mgPerDose muss > 0 sein","err.clicksPerDose":"clicksPerDose muss > 0 sein","err.volumePerDose":"volumePerDoseMl muss > 0 sein","err.desiredMg":"desiredMg muss ≥ 0 sein","err.minMax":"Ungültiger Minimal-/Maximalbereich für Klicks","warn.roundedToZero":"Auf 0 Klicks gerundet.","warn.deltaMg":"Abgegebene Dosis ({delivered}) weicht von der gewünschten ({requested}) um {delta} ab. Passen Sie ggf. den Rundungsmodus an.","warn.totalBelowMin":"Gesamtanzahl der Klicks ({total}) liegt unter dem empfohlenen Minimum von {min}. Sehr kleine Sätze können unzuverlässig sein.","warn.smallSet":"Ein oder mehrere Sätze liegen unter {min} Klicks; erwägen Sie einen anderen Rundungsmodus oder Zielwert.","warn.largeSet":"Ein oder mehrere Sätze überschreiten {max} Klicks; dies sollte mit den Vorgaben nicht vorkommen.","warn.partitionFail":"Es konnte keine gültige Aufteilung gefunden werden; es wird ein einzelner Satz verwendet."}};function o(e){const t=document.getElementById(e);if(!t)throw new Error(`Required element #${e} not found`);return t}const l=o("pen-mg"),a=o("desired-mg"),d=o("result"),c=o("t-title"),m=o("t-have"),u=o("t-want"),g=o("t-disclaimer"),p=o("t-pen-hint"),f=o("locale-switcher"),k=document.getElementById("copyright-year"),h=o("planner-form");k&&(k.textContent=String((new Date).getFullYear()));let w=n,b=t(w,s[w],{ml:"ml"}),v=i[w];const D={"en-GB":"en","fr-FR":"fr","de-DE":"de"};function M(e){return b.format.mg(e)}function x(e){w=e,b=t(e,s[e],{ml:"ml"}),v=i[e],document.documentElement.lang=D[e],c.textContent=v.title,m.textContent=v.haveLabel,u.textContent=v.wantLabel,g.textContent=v.disclaimer;const r=`${b.format.integer(60)} ${v.clicks}`;p.textContent=v.penHint(r),l.setAttribute("aria-label",v.ariaPen),a.setAttribute("aria-label",v.ariaDesired),function(){for(const e of Array.from(l.options)){const t=Number(e.value);e.textContent=`${M(t)} ${v.penWord}`}for(const e of Array.from(a.options)){const t=Number(e.value);e.textContent=M(t)}}();for(const t of Array.from(f.querySelectorAll("button[data-locale]"))){const r=t.dataset.locale===e;t.setAttribute("aria-pressed",r?"true":"false"),t.classList.toggle("ring-2",r),t.classList.toggle("ring-indigo-600/60",r),t.classList.toggle("border-indigo-600",r),t.classList.toggle("dark:ring-indigo-500/60",r),t.classList.toggle("dark:border-indigo-500",r)}document.title=v.title,C()}function P(e,t,r){const n=document.createElement(e);return t&&(n.className=t),null!=r&&(n.textContent=r),n}function C(){const{penMg:e,desiredMg:n}={penMg:Number(l.value),desiredMg:Number(a.value)},i=function(e){const{mgPerDose:n,desiredMg:i,clicksPerDose:s=60,volumePerDoseMl:o=.6,maxClicksPerSet:l=60,minClicksPerSet:a=10,roundingMode:d="nearest",i18n:c=t()}=e,m=[];if(n<=0)throw new Error(c.t("err.mgPerDose"));if(s<=0)throw new Error(c.t("err.clicksPerDose"));if(o<=0)throw new Error(c.t("err.volumePerDose"));if(i<0)throw new Error(c.t("err.desiredMg"));if(a<=0||l<a)throw new Error(c.t("err.minMax"));const u=n/s,g=o/s;let p=function(e,t){switch(t){case"down":return Math.floor(e);case"up":return Math.ceil(e);default:return Math.round(e)}}(i/u,d);if(0===i||0===p)return{totalClicks:0,clickSets:[],totalVolumeMl:0,requestedMg:i,deliveredMg:0,perClick:{mg:u,ml:g},warnings:0===i?m:[...m,c.t("warn.roundedToZero")]};const f=p*u,k=f-i;if(Math.abs(k)>u/2&&m.push(c.t("warn.deltaMg",{delivered:c.format.mg(f),requested:c.format.mg(i),delta:c.format.mg(Math.abs(k))})),p<a)return m.push(c.t("warn.totalBelowMin",{total:c.format.integer(p),min:c.format.integer(a)})),{totalClicks:p,clickSets:[p],totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m};const h=function(e,t){const{min:n,max:i}=t,s=Math.ceil(e/i);if(s<=0)return[];if(1===s&&e>=n&&e<=i)return[e];if(e<s*n){const t=Math.max(1,Math.floor(e/n));if(t>=1&&e<=t*i&&e>=t*n)return r(e,t,n,i)}return r(e,s,n,i)}(p,{min:a,max:l});return h&&0!==h.length?(h.some(e=>e<a)&&m.push(c.t("warn.smallSet",{min:c.format.integer(a)})),h.some(e=>e>l)&&m.push(c.t("warn.largeSet",{max:c.format.integer(l)})),{totalClicks:p,clickSets:h,totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m}):(m.push(c.t("warn.partitionFail")),{totalClicks:p,clickSets:[p],totalVolumeMl:p*g,requestedMg:i,deliveredMg:f,perClick:{mg:u,ml:g},warnings:m})}({mgPerDose:e,desiredMg:n,clicksPerDose:60,volumePerDoseMl:.6,i18n:b});!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(d);const s=P("div","flex items-baseline gap-2 mb-3");s.append(P("h2","text-lg font-semibold",v.resultHeading),P("span","text-xs text-zinc-500",v.summary(M(e),M(n)))),d.append(s);const o=P("div","grid grid-cols-1 gap-2 sm:grid-cols-2"),c=P("div","rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50");c.append(P("div","text-sm text-zinc-600 dark:text-zinc-300",v.clickSets));const m=P("div","mt-1 text-base font-medium");i.clickSets.forEach((e,t)=>{t>0&&m.append(P("span","mx-1 text-zinc-400","+")),m.append(P("span","inline-flex items-center rounded-md bg-zinc-100 px-2 py-0.5 text-sm font-medium text-zinc-800 ring-1 ring-inset ring-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:ring-zinc-700",String(e)))}),c.append(m),c.append(P("div","text-xs text-zinc-500",`${v.total}: ${b.format.integer(i.totalClicks)} ${v.clicks}`));const u=P("div","rounded-md bg-zinc-50 p-3 dark:bg-zinc-800/50");if(u.append(P("div","text-sm text-zinc-600 dark:text-zinc-300",v.totalVolume)),u.append(P("div","mt-1 text-base font-medium",b.format.ml(i.totalVolumeMl))),u.append(P("div","text-xs text-zinc-500",`${v.perClick}: ${b.format.ml(i.perClick.ml)}; ${v.perClickDose}: ${b.format.mg(i.perClick.mg)}`)),o.append(c,u),d.append(o),d.append(P("div","mt-3 text-sm",`${v.deliveredDose}: ${b.format.mg(i.deliveredMg)} (${v.requested}: ${b.format.mg(i.requestedMg)})`)),i.warnings.length){const e=P("ul","mt-2 list-disc pl-5 text-sm text-amber-700 dark:text-amber-400");i.warnings.forEach(t=>e.append(P("li",void 0,t))),d.append(e)}}f.addEventListener("click",e=>{const t=e.target.closest("[data-locale]");if(!t)return;const r=t.dataset.locale;r&&r!==w&&x(r)}),x(n),h.addEventListener("change",C)}},e=>{e(e.s=643)}]);
//# sourceMappingURL=main.9079d3a893f696b712ae.js.map